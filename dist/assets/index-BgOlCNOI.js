import{t as ys,c as ps,f as L,p as Ne,r as b,j as e,V as jt,R as Et,a as st,A as St,C as Tt,X as Rt,T as Ct,D as kt,P as _s,b as bs,S as Ns,u as vs,B as ws,d as re,F as at,e as ie,U as Dt,M as js,g as Es,W as Ss,h as Le,L as He,i as he,k as Lt,l as Ts,m as At,n as Rs,o as It,I as Mt,q as Ot,s as Ft,v as Ut,w as Vt,x as qt,y as Pt,z as zt,E as Cs,G as ks,H as Ds,J as Wt,K as Ls,N as ge,O as U,Q as P,Y as Ve,Z as Ht,_ as As,$ as $t,a0 as Gt,a1 as Me,a2 as Oe,a3 as Qt,a4 as Is,a5 as Ms,a6 as Kt,a7 as Os,a8 as Fs,a9 as Us,aa as Vs,ab as qs,ac as Yt,ad as Ps,ae as zs,af as xt,ag as rt,ah as Qe,ai as ce,aj as Ce,ak as B,al as ee,am as _e,an as pe,ao as Ie,ap as ve,aq as we,ar as je,as as Ee,at as Se,au as Ws,av as me,aw as Bt,ax as Hs,ay as Jt,az as Pe,aA as be,aB as nt,aC as $e,aD as ye,aE as $s,aF as qe,aG as ht,aH as Te,aI as Re,aJ as Gs,aK as Qs,aL as Ks,aM as Ys,aN as De,aO as Bs,aP as Js,aQ as Xs,aR as gt,aS as Zs,aT as ea,aU as Xt,aV as ta,aW as Zt,aX as es,aY as sa,aZ as ts,a_ as aa,a$ as ss,b0 as as,b1 as ra,b2 as na,b3 as rs,b4 as ia,b5 as oa,b6 as la,b7 as da,b8 as ca,b9 as ma,ba as ua,bb as xa,bc as ha,bd as ga}from"./vendor-CQwfuuxl.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))d(i);new MutationObserver(i=>{for(const p of i)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function r(i){const p={};return i.integrity&&(p.integrity=i.integrity),i.referrerPolicy&&(p.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?p.credentials="include":i.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(i){if(i.ep)return;i.ep=!0;const p=r(i);fetch(i.href,p)}})();function T(...s){return ys(ps(s))}function ne(s){return s==null||isNaN(s)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)}function Z(s,n=1){return s==null||isNaN(s)?"0%":`${s.toFixed(n)}%`}function ue(s){const n=typeof s=="string"?new Date(Number(s.slice(0,4)),Number(s.slice(5,7))-1,Number(s.slice(8,10))):s;return L(n,"MMM dd, yyyy")}function fa(s){return L(Ne(`2000-01-01T${s}`),"h:mm a")}function ns(s){switch(s.toLowerCase()){case"scheduled":return"bg-blue-100 text-blue-800";case"done":return"bg-green-100 text-green-800";case"no_show":return"bg-red-100 text-red-800";case"hired":return"bg-purple-100 text-purple-800";case"rejected":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}const ya=_s,is=b.forwardRef(({className:s,...n},r)=>e.jsx(jt,{ref:r,className:T("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...n}));is.displayName=jt.displayName;const pa=st("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),os=b.forwardRef(({className:s,variant:n,...r},d)=>e.jsx(Et,{ref:d,className:T(pa({variant:n}),s),...r}));os.displayName=Et.displayName;const _a=b.forwardRef(({className:s,...n},r)=>e.jsx(St,{ref:r,className:T("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...n}));_a.displayName=St.displayName;const ls=b.forwardRef(({className:s,...n},r)=>e.jsx(Tt,{ref:r,className:T("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...n,children:e.jsx(Rt,{className:"h-4 w-4"})}));ls.displayName=Tt.displayName;const ds=b.forwardRef(({className:s,...n},r)=>e.jsx(Ct,{ref:r,className:T("text-sm font-semibold",s),...n}));ds.displayName=Ct.displayName;const cs=b.forwardRef(({className:s,...n},r)=>e.jsx(kt,{ref:r,className:T("text-sm opacity-90",s),...n}));cs.displayName=kt.displayName;const ba=1,Na=1e6;let Be=0;function va(){return Be=(Be+1)%Number.MAX_SAFE_INTEGER,Be.toString()}const Je=new Map,ft=s=>{if(Je.has(s))return;const n=setTimeout(()=>{Je.delete(s),Ae({type:"REMOVE_TOAST",toastId:s})},Na);Je.set(s,n)},wa=(s,n)=>{switch(n.type){case"ADD_TOAST":return{...s,toasts:[n.toast,...s.toasts].slice(0,ba)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===n.toast.id?{...r,...n.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=n;return r?ft(r):s.toasts.forEach(d=>{ft(d.id)}),{...s,toasts:s.toasts.map(d=>d.id===r||r===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return n.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==n.toastId)}}},ze=[];let We={toasts:[]};function Ae(s){We=wa(We,s),ze.forEach(n=>{n(We)})}function ja({...s}){const n=va(),r=i=>Ae({type:"UPDATE_TOAST",toast:{...i,id:n}}),d=()=>Ae({type:"DISMISS_TOAST",toastId:n});return Ae({type:"ADD_TOAST",toast:{...s,id:n,open:!0,onOpenChange:i=>{i||d()}}}),{id:n,dismiss:d,update:r}}function oe(){const[s,n]=b.useState(We);return b.useEffect(()=>(ze.push(n),()=>{const r=ze.indexOf(n);r>-1&&ze.splice(r,1)}),[s]),{...s,toast:ja,dismiss:r=>Ae({type:"DISMISS_TOAST",toastId:r})}}function Ea(){const{toasts:s}=oe();return e.jsxs(ya,{children:[s.map(function({id:n,title:r,description:d,action:i,...p}){return e.jsxs(os,{...p,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(ds,{children:r}),d&&e.jsx(cs,{children:d})]}),i,e.jsx(ls,{})]},n)}),e.jsx(is,{})]})}const Sa="https://qewndmyixpzmtgjjihoj.supabase.co",Ta="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFld25kbXlpeHB6bXRnamppaG9qIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNjI0MDEsImV4cCI6MjA3MTYzODQwMX0.qGJGQ0U-0JjuFCn1deB5aOEA52y_uA9weCvZah3N6kI",E=bs(Sa,Ta,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),C=b.forwardRef(({className:s,type:n,...r},d)=>e.jsx("input",{type:n,className:T("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:d,...r}));C.displayName="Input";const Xe=st("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=b.forwardRef(({className:s,variant:n,size:r,asChild:d=!1,...i},p)=>{const m=d?Ns:"button";return e.jsx(m,{className:T(Xe({variant:n,size:r,className:s})),ref:p,...i})});R.displayName="Button";const yt=[{name:"Overview",href:"/overview",icon:ws,description:"Key metrics and trends",category:"main",priority:"high"},{name:"Omega Daily",href:"/omega-daily",icon:re,description:"Daily business metrics",category:"main",priority:"high"},{name:"Weekending Sheet",href:"/weekending-sheet",icon:at,description:"Weekly operational data",category:"main",priority:"high"},{name:"Calendar",href:"/calendar",icon:ie,description:"Events and reminders",category:"main",priority:"medium"},{name:"Interviews & Hires",href:"/interviews",icon:Dt,description:"Manage candidates and hiring",category:"main",priority:"medium"},{name:"OSAT",href:"/smg",icon:js,description:"Customer feedback metrics",category:"main",priority:"medium"},{name:"Goal Setting",href:"/goals",icon:Es,description:"Set goals & track progress",category:"main",priority:"medium"},{name:"Setup",href:"/setup",icon:Ss,description:"Copy SQL & configure",category:"main",priority:"low"}],ms=b.forwardRef(({open:s,isMobile:n,onClose:r},d)=>{const i=vs(),[p,m]=b.useState(""),[g,y]=b.useState(null),j=b.useMemo(()=>{if(!p.trim())return yt;const o=p.toLowerCase();return yt.filter(c=>c.name.toLowerCase().includes(o)||c.description.toLowerCase().includes(o))},[p]),u=()=>{n&&r()};return n?e.jsx("div",{ref:d,className:T("fixed top-0 left-0 w-80 h-full bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-in-out",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-wendys-red rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"W"})}),e.jsx("h2",{className:"font-semibold text-wendys-charcoal",children:"Navigation"})]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:r,className:"tap","aria-label":"Close navigation",children:"×"})]}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(C,{placeholder:"Search navigation...",value:p,onChange:o=>m(o.target.value),className:"pl-10 bg-gray-50 border-gray-200 focus:border-wendys-red focus:ring-wendys-red/20"})]})}),e.jsxs("nav",{className:"flex-1 overflow-y-auto p-4",children:[e.jsx("div",{className:"space-y-2",children:j.map(o=>{const c=i.pathname===o.href,x=o.icon;return e.jsxs(He,{to:o.href,onClick:u,className:T("flex items-center space-x-3 p-4 rounded-lg transition-all duration-200 tap",c?"bg-gradient-to-r from-wendys-red to-wendys-dark-red text-white shadow-lg":"text-gray-700 hover:bg-gray-50"),children:[e.jsx("div",{className:T("flex-shrink-0 p-2 rounded-lg",c?"bg-white/20":"bg-gray-100"),children:e.jsx(x,{className:T("h-5 w-5",c?"text-white":"text-gray-600")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:T("font-semibold text-sm",c?"text-white":"text-gray-800"),children:o.name}),o.priority==="high"&&e.jsx(he,{className:"h-3 w-3 text-yellow-500 fill-current"})]}),e.jsx("div",{className:T("text-xs mt-1",c?"text-red-100":"text-gray-500"),children:o.description})]})]},o.href)})}),p.trim()&&j.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Le,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No navigation items found"}),e.jsx("p",{className:"text-xs mt-1",children:"Try a different search term"})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-wendys-red rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"W"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dashboard v3.0"})]})})]})}):e.jsx("div",{className:T("bg-gradient-to-b from-white to-gray-50 shadow-2xl border-r border-gray-200 transition-[width] duration-300 ease-in-out shrink-0 overflow-hidden",s?"w-64":"w-16"),children:e.jsxs("div",{className:"flex flex-col h-full relative",children:[s&&e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(C,{placeholder:"Search navigation...",value:p,onChange:o=>m(o.target.value),className:"pl-10 h-9 bg-gray-50 border-gray-200 focus:border-wendys-red focus:ring-wendys-red/20"})]})}),e.jsxs("nav",{className:T("overflow-y-auto flex-1",s?"p-4":"p-2"),children:[e.jsx("div",{className:"space-y-1",children:j.map(o=>{const c=i.pathname===o.href,x=o.icon;return e.jsxs("div",{className:"relative",children:[e.jsxs(He,{to:o.href,className:T("flex items-center transition-all duration-200 group relative",s?"space-x-3 p-3 rounded-lg mx-0":"justify-center p-3 rounded-lg mx-1",c?"bg-gradient-to-r from-wendys-red to-wendys-dark-red text-white shadow-lg ring-1 ring-red-200":"text-gray-700 hover:bg-white hover:shadow-sm hover:ring-1 hover:ring-gray-200"),onMouseEnter:()=>!s&&y(o.href),onMouseLeave:()=>!s&&y(null),children:[e.jsx("div",{className:T("flex-shrink-0 p-2 rounded-lg transition-all duration-200",c?"bg-white/20":"bg-gray-100 group-hover:bg-wendys-red/10 group-hover:scale-110"),children:e.jsx(x,{className:T("h-5 w-5 transition-colors duration-200",c?"text-white":"text-gray-600 group-hover:text-wendys-red")})}),s&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:T("font-semibold text-sm",c?"text-white":"text-gray-800"),children:o.name}),o.priority==="high"&&e.jsx(he,{className:"h-3 w-3 text-yellow-500 fill-current"})]}),e.jsx("div",{className:T("text-xs mt-1",c?"text-red-100":"text-gray-500"),children:o.description})]})]}),!s&&g===o.href&&e.jsx("div",{className:"absolute left-full ml-2 top-1/2 transform -translate-y-1/2 z-50",children:e.jsxs("div",{className:"bg-gray-900 text-white text-sm px-3 py-2 rounded-lg shadow-lg whitespace-nowrap",children:[e.jsx("div",{className:"font-medium",children:o.name}),e.jsx("div",{className:"text-gray-300 text-xs mt-1",children:o.description}),e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})})]},o.href)})}),p.trim()&&j.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Le,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No navigation items found"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Try a different search term"})]})]}),s&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white/80 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 bg-wendys-red rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"W"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dashboard v3.0"})]})})]})})});ms.displayName="RightNavDrawer";const Ra=Cs,Ca=ks,ka=b.forwardRef(({className:s,inset:n,children:r,...d},i)=>e.jsxs(Lt,{ref:i,className:T("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",s),...d,children:[r,e.jsx(Ts,{className:"ml-auto h-4 w-4"})]}));ka.displayName=Lt.displayName;const Da=b.forwardRef(({className:s,...n},r)=>e.jsx(At,{ref:r,className:T("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n}));Da.displayName=At.displayName;const us=b.forwardRef(({className:s,sideOffset:n=4,...r},d)=>e.jsx(Rs,{children:e.jsx(It,{ref:d,sideOffset:n,className:T("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));us.displayName=It.displayName;const xs=b.forwardRef(({className:s,inset:n,...r},d)=>e.jsx(Mt,{ref:d,className:T("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",s),...r}));xs.displayName=Mt.displayName;const La=b.forwardRef(({className:s,children:n,checked:r,...d},i)=>e.jsxs(Ot,{ref:i,className:T("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...d,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ft,{children:e.jsx(Ut,{className:"h-4 w-4"})})}),n]}));La.displayName=Ot.displayName;const Aa=b.forwardRef(({className:s,children:n,...r},d)=>e.jsxs(Vt,{ref:d,className:T("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ft,{children:e.jsx(qt,{className:"h-2 w-2 fill-current"})})}),n]}));Aa.displayName=Vt.displayName;const Ia=b.forwardRef(({className:s,inset:n,...r},d)=>e.jsx(Pt,{ref:d,className:T("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",s),...r}));Ia.displayName=Pt.displayName;const Ma=b.forwardRef(({className:s,...n},r)=>e.jsx(zt,{ref:r,className:T("-mx-1 my-1 h-px bg-muted",s),...n}));Ma.displayName=zt.displayName;function Oa({user:s,onNavToggle:n,navOpen:r}){const{toast:d}=oe(),i=async()=>{try{await E.auth.signOut(),d({title:"Signed out",description:"You have been successfully signed out."})}catch(p){console.error("Error signing out:",p),d({title:"Error",description:"Failed to sign out. Please try again.",variant:"destructive"})}};return e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30",children:e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:n,className:"tap p-2 hover:bg-gray-100","aria-label":r?"Close navigation":"Open navigation",children:e.jsx(Ds,{className:"h-5 w-5 text-wendys-charcoal"})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-wendys-red rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-xl",children:"W"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg sm:text-xl font-bold text-wendys-charcoal",children:[e.jsx("span",{className:"hidden sm:inline",children:"SE 14th GM Dashboard"}),e.jsx("span",{className:"sm:hidden",children:"Dashboard"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 hide-on-mobile",children:L(new Date,"EEEE, MMMM d, yyyy")})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4",children:e.jsxs(Ra,{children:[e.jsx(Ca,{asChild:!0,children:e.jsxs(R,{variant:"ghost",className:"flex items-center space-x-1 sm:space-x-2 tap",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:s.email})]})}),e.jsx(us,{align:"end",children:e.jsxs(xs,{onClick:i,children:[e.jsx(Ls,{className:"mr-2 h-4 w-4"}),"Sign out"]})})]})})]})})}const Fa=ge({business_date:P().min(1,"Business date is required"),net_sales:U.number().min(0,"Net sales must be positive"),last_year_sales:U.number().min(0,"Last year sales must be positive"),labor_hours:U.number().min(0,"Labor hours must be positive"),ideal_labor_hours:U.number().min(0,"Ideal labor hours must be positive"),labor_percentage:U.number().min(0,"Labor percentage must be positive"),theoretical_food_cost:U.number().min(0,"Theoretical food cost must be positive"),food_variance_cost:U.number(),waste_amount:U.number().min(0,"Waste amount must be positive"),breakfast_sales:U.number().min(0,"Breakfast sales must be positive"),night_sales:U.number().min(0,"Night sales must be positive")}),Ua=ge({date:P().min(1,"Date is required"),accuracy_decimal:Ve().min(0,"Accuracy must be 0 or greater"),zod_per_10k:Ve().min(0,"ZOD per 10k must be 0 or greater"),cc_complaints:Ve().min(0,"CC Complaints must be 0 or greater"),osat_decimal:Ve().min(0,"OSAT Score must be 0 or greater"),notes:P().optional()});ge({candidate_name:P().min(1,"Candidate name is required"),phone:P().optional(),email:P().email("Invalid email format").optional().or(As("")),position:P().optional(),interview_date:P().min(1,"Interview date is required"),interview_time:P().min(1,"Interview time is required"),status:Ht(["SCHEDULED","COMPLETED","NO_SHOW","HIRED","REJECTED"]),notes:P().optional()});ge({entry_date:P().min(1,"Entry date is required"),accuracy_of_order:U.number().min(0).max(5).optional(),zone_of_defection:U.number().min(0).max(5).optional(),customer_computers:U.number().min(0).max(5).optional(),taste_of_food:U.number().min(0).max(5).optional(),osat:U.number().min(0).max(5).optional()});ge({documents_received:$t().default(!1),documents_folder:P().optional(),onboarding_sent_date:P().optional(),onboarding_completed_date:P().optional(),manager_reviewed_date:P().optional(),entered_in_system_date:P().optional(),fingerprint_scheduled_date:P().optional(),first_day:P().optional(),notes:P().optional()});const Va=ge({email:P().email("Invalid email format"),password:P().min(6,"Password must be at least 6 characters")}),qa=ge({week_ending_date:P().min(1,"Week ending date is required"),manager_name:Ht(["Scott","Sophear","Letoya","Carissa"],{required_error:"Please select a manager"}),breakfast_sales:U.number().min(0,"Breakfast sales must be positive"),late_night_sales:U.number().min(0,"Late night sales must be positive"),net_sales:U.number().min(0,"Net sales must be positive"),discounts:U.number().default(0),cash:U.number().default(0),food_total:U.number().default(0),food_cost:U.number().default(0),variance_dollars:U.number().default(0),food_variance_percentage:U.number().default(0),labor:U.number().min(0,"Labor must be positive"),credit_hours:U.number().min(0,"Credit hours must be positive"),reason:P().optional(),onboarding:$t().default(!1),crew_food_safety_quiz:U.number().min(0).max(100,"Score must be between 0-100"),mgr_food_safety_quiz:U.number().min(0).max(100,"Score must be between 0-100"),new_hire_name:P().optional(),terminations:P().optional(),term_date:P().optional()}),Pa=st("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=b.forwardRef(({className:s,...n},r)=>e.jsx(Gt,{ref:r,className:T(Pa(),s),...n}));S.displayName=Gt.displayName;function za(){const[s,n]=b.useState(!1),[r,d]=b.useState(!1),{toast:i}=oe(),{register:p,handleSubmit:m,formState:{errors:g}}=Me({resolver:Oe(Va)}),y=async j=>{n(!0);try{const{error:u}=await E.auth.signInWithPassword({email:j.email,password:j.password});if(u)throw u;i({title:"Welcome!",description:"Successfully signed in to your dashboard."})}catch(u){console.error("Login error:",u),i({title:"Login failed",description:u.message||"Please check your credentials and try again.",variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-wendys-gray flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-wendys-red rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-3xl",children:"W"})}),e.jsx("h1",{className:"text-2xl font-bold text-wendys-charcoal mb-2",children:"SE 14th GM Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to access your restaurant metrics"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 border border-gray-200",children:[e.jsxs("form",{onSubmit:m(y),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"email",className:"text-wendys-charcoal font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(C,{id:"email",type:"email",placeholder:"Enter your email",className:"pl-10",...p("email")})]}),g.email&&e.jsx("p",{className:"text-red-600 text-sm",children:g.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"password",className:"text-wendys-charcoal font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(C,{id:"password",type:r?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10",...p("password")}),e.jsx("button",{type:"button",onClick:()=>d(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Kt,{className:"h-4 w-4"})})]}),g.password&&e.jsx("p",{className:"text-red-600 text-sm",children:g.password.message})]}),e.jsx(R,{type:"submit",className:"w-full wendys-button",disabled:s,children:s?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Demo Credentials"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," gm@se14th.wendys.com"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Password:"})," test123"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use these credentials to test the dashboard functionality."})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 Wendy's International, Inc. All rights reserved."})})]})})}const le=Os({component:Wa});function Wa(){const[s,n]=b.useState(null),[r,d]=b.useState(!0),[i,p]=b.useState(()=>{const o=localStorage.getItem("navOpen"),c=typeof window<"u"?window.innerWidth>=768:!0;return o?JSON.parse(o):c}),[m,g]=b.useState(typeof window<"u"?window.innerWidth<768:!1),y=b.useRef(null),{toast:j}=oe(),u=Fs();return b.useEffect(()=>{const o=()=>{const c=window.innerWidth<768;g(c),c&&i&&p(!1)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[i]),b.useEffect(()=>{const o=x=>{x.key==="Escape"&&i&&m&&p(!1)},c=x=>{m&&i&&y.current&&!y.current.contains(x.target)&&p(!1)};return i&&m?(document.addEventListener("keydown",o),document.addEventListener("mousedown",c),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",o),document.removeEventListener("mousedown",c),document.body.style.overflow="unset"}},[i,m]),b.useEffect(()=>{if((async()=>{try{if("https://qewndmyixpzmtgjjihoj.supabase.co".trim()===""){n({id:"mock-user-id",email:"gm@wendys-se14th.com",app_metadata:{},user_metadata:{},aud:"authenticated",created_at:new Date().toISOString()}),d(!1);return}const{data:{session:c}}=await E.auth.getSession();c!=null&&c.user&&n(c.user)}catch(c){console.error("Error checking session:",c),n({id:"mock-user-id",email:"gm@wendys-se14th.com",app_metadata:{},user_metadata:{},aud:"authenticated",created_at:new Date().toISOString()})}finally{d(!1)}})(),"https://qewndmyixpzmtgjjihoj.supabase.co".trim()!==""){const{data:{subscription:c}}=E.auth.onAuthStateChange(async(x,v)=>{x==="SIGNED_IN"&&(v!=null&&v.user)?(n(v.user),j({title:"Welcome back!",description:"Successfully signed in to your dashboard."})):x==="SIGNED_OUT"&&(n(null),u({to:"/"}),j({title:"Signed out",description:"You have been successfully signed out."}))});return()=>c.unsubscribe()}},[u,j]),b.useEffect(()=>{localStorage.setItem("navOpen",JSON.stringify(i))},[i]),r?e.jsx("div",{className:"min-h-screen bg-wendys-gray flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-wendys-red mx-auto mb-4"}),e.jsx("p",{className:"text-wendys-charcoal",children:"Loading dashboard..."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-wendys-gray",children:[e.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),e.jsx(Oa,{user:s,onNavToggle:()=>p(!i),navOpen:i}),e.jsxs("div",{className:"flex relative",children:[m&&i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 backdrop-blur-sm",onClick:()=>p(!1)}),e.jsx(ms,{open:i,isMobile:m,onClose:()=>p(!1),ref:y}),e.jsx("main",{id:"main-content",className:T("flex-1 transition-all duration-300 ease-in-out mobile-container","ml-0"),children:e.jsx(Us,{})})]})]}):e.jsx(za,{})}function ke({className:s,classNames:n,showOutsideDays:r=!0,...d}){return e.jsx(Vs,{showOutsideDays:r,className:T("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:T(Xe({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:T(Xe({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},...d})}ke.displayName="Calendar";const Ke=Ps,Ye=zs,Fe=b.forwardRef(({className:s,align:n="center",sideOffset:r=4,...d},i)=>e.jsx(qs,{children:e.jsx(Yt,{ref:i,align:n,sideOffset:r,className:T("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})}));Fe.displayName=Yt.displayName;function Ha({columns:s,data:n,className:r,emptyMessage:d="No data available",loading:i=!1}){const[p,m]=b.useState(null),[g,y]=b.useState(null),j=b.useMemo(()=>!p||!g?n:[...n].sort((c,x)=>{const v=c[p],D=x[p];if(v==null&&D==null)return 0;if(v==null)return g==="asc"?-1:1;if(D==null)return g==="asc"?1:-1;if(typeof v=="number"&&typeof D=="number")return g==="asc"?v-D:D-v;if(typeof v=="string"&&typeof D=="string")return g==="asc"?v.localeCompare(D):D.localeCompare(v);if(v instanceof Date&&D instanceof Date)return g==="asc"?v.getTime()-D.getTime():D.getTime()-v.getTime();const N=String(v),h=String(D);return g==="asc"?N.localeCompare(h):h.localeCompare(N)}),[n,p,g]),u=c=>{p===c?g==="asc"?y("desc"):g==="desc"&&(y(null),m(null)):(m(c),y("asc"))},o=c=>p!==c?e.jsx(xt,{className:"h-3 w-3 text-gray-400"}):g==="asc"?e.jsx(rt,{className:"h-3 w-3 text-gray-600"}):g==="desc"?e.jsx(Qe,{className:"h-3 w-3 text-gray-600"}):e.jsx(xt,{className:"h-3 w-3 text-gray-400"});return i?e.jsx($a,{columns:s}):e.jsx("div",{className:T("overflow-x-auto",r),children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-200 bg-gray-50/50",children:s.map(c=>e.jsx("th",{className:T("py-3 px-4 font-medium text-gray-700 text-sm",c.align==="center"&&"text-center",c.align==="right"&&"text-right",c.sortable&&"cursor-pointer hover:bg-gray-100 select-none",c.className),onClick:()=>c.sortable&&u(c.key),children:e.jsxs("div",{className:T("flex items-center gap-1",c.align==="center"&&"justify-center",c.align==="right"&&"justify-end"),children:[c.label,c.sortable&&o(c.key)]})},c.key))})}),e.jsx("tbody",{children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:s.length,className:"py-8 px-4 text-center text-gray-500",children:d})}):j.map((c,x)=>e.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:s.map(v=>e.jsx("td",{className:T("py-3 px-4 text-sm",v.align==="center"&&"text-center",v.align==="right"&&"text-right",v.className),children:v.render?v.render(c[v.key],c):c[v.key]},v.key))},c.id||x))})]})})}function $a({columns:s}){return e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-200 bg-gray-50/50",children:s.map(n=>e.jsx("th",{className:"py-3 px-4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})},n.key))})}),e.jsx("tbody",{children:[...Array(5)].map((n,r)=>e.jsx("tr",{className:"border-b border-gray-100",children:s.map(d=>e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-full"})},d.key))},r))})]})})})}function xe({title:s,subtitle:n,className:r,children:d,loading:i=!1,error:p,onRefresh:m}){return e.jsxs("div",{className:T("wendys-card",r),children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:s}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),m&&e.jsx("button",{onClick:m,className:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Refresh chart",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),p?e.jsx("div",{className:"flex items-center justify-center h-[300px] text-red-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",children:"Error loading chart"}),e.jsx("p",{className:"text-xs mt-1 text-red-400",children:p}),m&&e.jsx("button",{onClick:m,className:"mt-2 px-3 py-1 text-xs bg-red-50 text-red-600 rounded hover:bg-red-100",children:"Try again"})]})}):i?e.jsx(Ga,{}):d]})}function Ga(){return e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"h-[300px] bg-gray-100 rounded flex flex-col justify-end p-4",children:[e.jsx("div",{className:"absolute left-2 top-4 space-y-8",children:[...Array(4)].map((s,n)=>e.jsx("div",{className:"w-8 h-2 bg-gray-200 rounded"},n))}),e.jsx("div",{className:"flex items-end justify-between h-48 mb-4",children:[...Array(12)].map((s,n)=>e.jsx("div",{className:"bg-gray-200 rounded-t",style:{height:`${Math.random()*80+20}%`,width:"6%"}},n))}),e.jsx("div",{className:"flex justify-between",children:[...Array(6)].map((s,n)=>e.jsx("div",{className:"w-12 h-2 bg-gray-200 rounded"},n))})]})})}const G={currency:s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s),currencyDetailed:s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(s),percent:(s,n=1)=>`${(s??0).toFixed(n)}%`,hours:(s,n=1)=>`${(s??0).toFixed(n)}h`,dateShort:s=>{const n=typeof s=="string"?new Date(Number(String(s).slice(0,4)),Number(String(s).slice(5,7))-1,Number(String(s).slice(8,10))):s;return L(n,"MMM d")},dateFull:s=>{const n=typeof s=="string"?new Date(Number(String(s).slice(0,4)),Number(String(s).slice(5,7))-1,Number(String(s).slice(8,10))):s;return L(n,"MMM dd, yyyy")},currencyCompact:s=>{if(s==null||isNaN(s))return"$0";const n=Math.abs(s);return n>=1e6?`$${(s/1e6).toFixed(1)}M`:n>=1e3?`$${(s/1e3).toFixed(1)}k`:G.currency(s)}},V={sales:"#E2231A",salesSecondary:"#B71C13",labor:"#374151",laborIdeal:"#6B7280",waste:"#EF4444",foodVariance:"#F59E0B",positive:"#10B981",warning:"#F59E0B",gridStroke:"#E5E7EB",textPrimary:"#111827",textSecondary:"#6B7280"},H={cartesianGrid:{strokeDasharray:"3 3",stroke:V.gridStroke},xAxis:{stroke:V.textSecondary,fontSize:12,tickMargin:8},yAxis:{stroke:V.textSecondary,fontSize:12,tickMargin:8},tooltip:{contentStyle:{backgroundColor:"white",border:`1px solid ${V.gridStroke}`,borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",fontSize:"14px"},labelStyle:{color:V.textPrimary,fontWeight:"600",marginBottom:"4px"}},legend:{iconType:"rect",wrapperStyle:{fontSize:"12px",color:V.textSecondary}}},Ze=(s,n=new Date)=>{const r=new Date(n);switch(s){case"today":return{start:L(r,"yyyy-MM-dd"),end:L(r,"yyyy-MM-dd"),label:"Today"};case"wtd":const d=new Date(r);return d.setDate(r.getDate()-r.getDay()),{start:L(d,"yyyy-MM-dd"),end:L(r,"yyyy-MM-dd"),label:"Week to Date"};case"mtd":const i=new Date(r.getFullYear(),r.getMonth(),1);return{start:L(i,"yyyy-MM-dd"),end:L(r,"yyyy-MM-dd"),label:"Month to Date"};case"last7":const p=new Date(r);return p.setDate(r.getDate()-6),{start:L(p,"yyyy-MM-dd"),end:L(r,"yyyy-MM-dd"),label:"Last 7 Days"};case"last30":const m=new Date(r);return m.setDate(r.getDate()-29),{start:L(m,"yyyy-MM-dd"),end:L(r,"yyyy-MM-dd"),label:"Last 30 Days"};default:return{start:"",end:"",label:"All Time"}}},Qa=ce("/smg")({component:Ka});function Ka(){const[s,n]=b.useState(null),[r,d]=b.useState(),{toast:i}=oe(),p=Ce(),m=Me({resolver:Oe(Ua),defaultValues:{date:"",accuracy_decimal:0,zod_per_10k:0,cc_complaints:0,osat_decimal:0,notes:""}});b.useEffect(()=>{let h=!0;return(async()=>{var $;const{data:w}=await E.auth.getUser(),A=($=w.user)==null?void 0:$.id;if(!A)return;const{data:O,error:W}=await E.from("users").select("store_id").eq("id",A).maybeSingle();h&&(W||n((O==null?void 0:O.store_id)??null))})(),()=>{h=!1}},[]);const{data:g=[],isLoading:y,error:j}=B({queryKey:["smg_daily",s],queryFn:async()=>{if(!s)return[];const{data:h,error:w}=await E.from("smg_daily").select("*").eq("store_id",s).order("date",{ascending:!1});if(w)throw w;return h||[]},enabled:!!s}),{data:u=[]}=B({queryKey:["smg_entries_import",s],queryFn:async()=>{if(!s)return[];const{data:h,error:w}=await E.from("smg_entries").select("*").eq("store_id",s).order("entry_date",{ascending:!1});if(w)throw w;return h||[]},enabled:!!s}),o=b.useMemo(()=>g.length>0?g:u.length?u.map(h=>({id:h.id,date:h.entry_date,accuracy_decimal:Number(h.accuracy_of_order)||0,zod_per_10k:Number(h.zone_of_defection)||0,cc_complaints:Number(h.customer_computers)||0,osat_decimal:Number(h.osat)||0,notes:"",created_at:h.created_at})):[],[g,u]),c=ee({mutationFn:async h=>{if(!s)throw new Error("Store not connected");const{error:w}=await E.from("smg_daily").insert({store_id:s,date:h.date,accuracy_decimal:h.accuracy_decimal,zod_per_10k:h.zod_per_10k,cc_complaints:h.cc_complaints,osat_decimal:h.osat_decimal,notes:h.notes||null});if(w)throw w},onSuccess:()=>{p.invalidateQueries({queryKey:["smg_daily",s]}),m.reset(),d(void 0),i({title:"Success",description:"SMG entry saved successfully."})},onError:h=>{i({title:"Error",description:h.message||"Failed to save SMG entry.",variant:"destructive"})}}),x=h=>{c.mutate(h)},v=h=>{const w=Number(h.slice(0,4)),A=Number(h.slice(5,7)),O=Number(h.slice(8,10));return new Date(w,(A||1)-1,O||1)},D=[{key:"date",label:"Date",sortable:!0,render:h=>L(v(h),"MMM dd, yyyy")},{key:"accuracy_decimal",label:"Accuracy of Order",sortable:!0,align:"right",render:h=>(h??0).toFixed(2)},{key:"zod_per_10k",label:"ZOD per 10k",sortable:!0,align:"right",render:h=>(h??0).toFixed(2)},{key:"cc_complaints",label:"CC Complaints",sortable:!0,align:"right",render:h=>(h??0).toFixed(2)},{key:"osat_decimal",label:"OSAT Score",sortable:!0,align:"right",render:h=>(h??0).toFixed(2)},{key:"notes",label:"Notes",sortable:!1,render:h=>e.jsx("div",{className:"max-w-32 truncate",title:h,children:h||"-"})}],N=b.useMemo(()=>o.length?o.slice().reverse().map(h=>({date:G.dateShort(h.date),osat:h.osat_decimal})):[],[o]);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-wendys-charcoal",children:"SMG Manual Entry"}),e.jsx("p",{className:"text-gray-600",children:"Record your daily service metrics and customer satisfaction scores"})]})}),j&&e.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:["Error loading data: ",j.message]}),e.jsxs("div",{className:"wendys-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_e,{className:"h-5 w-5 text-wendys-red"}),e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:"Add New Entry"})]}),e.jsxs("form",{onSubmit:m.handleSubmit(x),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"date",children:"Date *"}),e.jsxs(Ke,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(R,{variant:"outline",id:"date",className:"w-full justify-start text-left font-normal",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),r?L(r,"MMM dd, yyyy"):"Select date"]})}),e.jsx(Fe,{className:"w-auto p-0",align:"start",children:e.jsx(ke,{mode:"single",selected:r,onSelect:h=>{d(h),h&&m.setValue("date",L(h,"yyyy-MM-dd"))},initialFocus:!0})})]}),m.formState.errors.date&&e.jsx("p",{className:"text-sm text-red-600",children:m.formState.errors.date.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"accuracy_decimal",children:"Accuracy of Order *"}),e.jsx(C,{id:"accuracy_decimal",type:"number",step:"0.01",min:"0",placeholder:"Enter decimal value",...m.register("accuracy_decimal",{valueAsNumber:!0})}),m.formState.errors.accuracy_decimal&&e.jsx("p",{className:"text-sm text-red-600",children:m.formState.errors.accuracy_decimal.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"zod_per_10k",children:"ZOD per 10k *"}),e.jsx(C,{id:"zod_per_10k",type:"number",step:"0.01",min:"0",placeholder:"Enter decimal value",...m.register("zod_per_10k",{valueAsNumber:!0})}),m.formState.errors.zod_per_10k&&e.jsx("p",{className:"text-sm text-red-600",children:m.formState.errors.zod_per_10k.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"cc_complaints",children:"CC Complaints *"}),e.jsx(C,{id:"cc_complaints",type:"number",step:"0.01",min:"0",placeholder:"Enter decimal value",...m.register("cc_complaints",{valueAsNumber:!0})}),m.formState.errors.cc_complaints&&e.jsx("p",{className:"text-sm text-red-600",children:m.formState.errors.cc_complaints.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"osat_decimal",children:"OSAT Score *"}),e.jsx(C,{id:"osat_decimal",type:"number",step:"0.01",min:"0",placeholder:"Enter decimal value",...m.register("osat_decimal",{valueAsNumber:!0})}),m.formState.errors.osat_decimal&&e.jsx("p",{className:"text-sm text-red-600",children:m.formState.errors.osat_decimal.message})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2 lg:col-span-1",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{id:"notes",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-wendys-red focus:border-wendys-red",placeholder:"Optional notes...",...m.register("notes")})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(R,{type:"submit",disabled:c.isPending||!s,className:"bg-wendys-red hover:bg-wendys-red/90",children:c.isPending?"Saving...":"Save Entry"})})]})]}),e.jsx(xe,{title:"OSAT Score Trend",subtitle:`${o.length} entries`,loading:y,error:j==null?void 0:j.message,children:N.length>0?e.jsx(pe,{width:"100%",height:300,children:e.jsxs(Ie,{data:N,children:[e.jsx(ve,{...H.cartesianGrid}),e.jsx(we,{dataKey:"date",...H.xAxis}),e.jsx(je,{...H.yAxis,tickFormatter:h=>(h??0).toFixed(1)}),e.jsx(Ee,{...H.tooltip,formatter:h=>[(h??0).toFixed(2),"OSAT Score"]}),e.jsx(Se,{type:"monotone",dataKey:"osat",stroke:V.sales,strokeWidth:3,dot:{fill:V.sales,strokeWidth:2,r:4},activeDot:{r:6,stroke:V.salesSecondary,strokeWidth:2},name:"OSAT Score"})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No chart data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add some entries to see OSAT trends"})]})})}),e.jsxs("div",{className:"wendys-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:"Previous Entries"}),e.jsx("div",{className:"text-sm text-gray-600",children:y?"Loading...":`${o.length} entries`})]}),s?e.jsx(Ha,{columns:D,data:o,loading:y,emptyMessage:"No SMG entries found. Add your first entry above."}):e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("p",{className:"text-lg font-medium",children:"Store not connected"}),e.jsx("p",{className:"text-sm mt-2",children:"Please go to Setup to link your account to a store first."})]})})]})]})}const pt=`-- Goals table for Goal Setting tab
create table if not exists public.goals (
  id uuid primary key default gen_random_uuid(),
  store_id uuid not null references stores(id) on delete cascade,
  scope text not null check (scope in ('week','month','custom')),
  period_start date not null,
  period_end date not null,
  sales_target numeric not null default 0,
  labor_target_pct numeric not null default 0,
  waste_target_pct numeric not null default 0,
  food_variance_target_pct numeric not null default 0,
  service_seconds_target numeric not null default 0,
  team_notes text,
  created_at timestamp with time zone default now(),
  unique (store_id, period_start, period_end)
);
-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Create stores table
CREATE TABLE stores (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  name text NOT NULL,
  created_at timestamptz DEFAULT now()
);

-- Create users table linked to auth.users
CREATE TABLE users (
  id uuid PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  store_id uuid NOT NULL REFERENCES stores(id),
  role text NOT NULL DEFAULT 'gm',
  created_at timestamptz DEFAULT now()
);

-- Create Omega Daily table for daily business metrics
CREATE TABLE omega_daily (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  store_id uuid NOT NULL REFERENCES stores(id),
  business_date date NOT NULL,
  net_sales numeric NOT NULL,
  last_year_sales numeric NOT NULL,
  comp_net_sales numeric GENERATED ALWAYS AS (net_sales - last_year_sales) STORED,
  labor_hours numeric NOT NULL,
  ideal_labor_hours numeric NOT NULL,
  labor_hours_diff numeric GENERATED ALWAYS AS (labor_hours - ideal_labor_hours) STORED,
  labor_percentage numeric NOT NULL,
  theoretical_food_cost numeric NOT NULL,
  food_variance_cost numeric NOT NULL,
  food_variance_percentage numeric GENERATED ALWAYS AS (
    CASE WHEN theoretical_food_cost = 0 THEN 0 ELSE (food_variance_cost / theoretical_food_cost) * 100 END
  ) STORED,
  waste_amount numeric NOT NULL,
  waste_percentage numeric GENERATED ALWAYS AS (
    CASE WHEN net_sales = 0 THEN 0 ELSE (waste_amount / net_sales) * 100 END
  ) STORED,
  breakfast_sales numeric NOT NULL,
  night_sales numeric NOT NULL,
  created_at timestamptz DEFAULT now()
);

-- Create unique index on store_id and business_date
CREATE UNIQUE INDEX ON omega_daily (store_id, business_date);

-- Create interview status enum
CREATE TYPE interview_status AS ENUM ('SCHEDULED','COMPLETED','NO_SHOW','HIRED','REJECTED');

-- Create interviews table
CREATE TABLE interviews (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  store_id uuid NOT NULL REFERENCES stores(id),
  candidate_name text NOT NULL,
  phone text,
  email text,
  position text,
  interview_date date NOT NULL,
  interview_time time NOT NULL,
  status interview_status NOT NULL DEFAULT 'SCHEDULED',
  notes text,
  created_at timestamptz DEFAULT now()
);

-- Create hiring process table
CREATE TABLE hires (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  store_id uuid NOT NULL REFERENCES stores(id),
  interview_id uuid UNIQUE NOT NULL REFERENCES interviews(id) ON DELETE CASCADE,
  documents_received boolean DEFAULT false,
  documents_folder text, -- Supabase Storage path
  onboarding_sent_date date,
  onboarding_completed_date date,
  manager_reviewed_date date,
  entered_in_system_date date,
  fingerprint_scheduled_date date,
  first_day date,
  notes text,
  created_at timestamptz DEFAULT now()
);

-- Create SMG daily entries table
CREATE TABLE smg_entries (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  store_id uuid NOT NULL REFERENCES stores(id),
  entry_date date NOT NULL,
  accuracy_of_order numeric,
  zone_of_defection numeric,
  customer_computers numeric,
  taste_of_food numeric,
  osat numeric,
  created_at timestamptz DEFAULT now()
);

-- Create unique index on store_id and entry_date
CREATE UNIQUE INDEX ON smg_entries (store_id, entry_date);

-- Create view for SMG monthly aggregations
CREATE VIEW smg_monthly AS
SELECT
  store_id,
  date_trunc('month', entry_date)::date AS month_start,
  AVG(accuracy_of_order) AS avg_accuracy_of_order,
  AVG(zone_of_defection) AS avg_zone_of_defection,
  AVG(customer_computers) AS avg_customer_computers,
  AVG(taste_of_food) AS avg_taste_of_food,
  AVG(osat) AS avg_osat,
  COUNT(*) AS total_entries
FROM smg_entries
GROUP BY store_id, date_trunc('month', entry_date);

-- Enable Row Level Security on all tables
ALTER TABLE stores ENABLE ROW LEVEL SECURITY;
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
ALTER TABLE omega_daily ENABLE ROW LEVEL SECURITY;
ALTER TABLE interviews ENABLE ROW LEVEL SECURITY;
ALTER TABLE hires ENABLE ROW LEVEL SECURITY;
ALTER TABLE smg_entries ENABLE ROW LEVEL SECURITY;
-- RLS Policies for goals
ALTER TABLE goals ENABLE ROW LEVEL SECURITY;
CREATE POLICY goals_isolate ON goals
  FOR ALL USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()))
  WITH CHECK (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- RLS Policies for stores (only allow reading own store)
CREATE POLICY stores_isolate ON stores
  FOR ALL USING (id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- RLS Policies for users (only allow reading own user record)
CREATE POLICY users_isolate ON users
  FOR ALL USING (id = auth.uid());

-- RLS Policies for omega_daily
CREATE POLICY omega_daily_isolate ON omega_daily
  FOR ALL USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()))
  WITH CHECK (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- RLS Policies for interviews
CREATE POLICY interviews_isolate ON interviews
  FOR ALL USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()))
  WITH CHECK (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- RLS Policies for hires
CREATE POLICY hires_isolate ON hires
  FOR ALL USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()))
  WITH CHECK (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- RLS Policies for smg_entries
CREATE POLICY smg_entries_isolate ON smg_entries
  FOR ALL USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()))
  WITH CHECK (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- RLS Policies for smg_monthly view
CREATE POLICY smg_monthly_isolate ON smg_monthly
  FOR SELECT USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- Create SMG Daily table for manual entry
CREATE TABLE smg_daily (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  store_id UUID NOT NULL REFERENCES stores(id) ON DELETE CASCADE,
  date DATE NOT NULL,
  accuracy_decimal NUMERIC NOT NULL CHECK (accuracy_decimal >= 0),
  zod_per_10k NUMERIC NOT NULL CHECK (zod_per_10k >= 0),
  cc_complaints NUMERIC NOT NULL CHECK (cc_complaints >= 0),
  osat_decimal NUMERIC NOT NULL CHECK (osat_decimal >= 0),
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(store_id, date)
);

-- Enable RLS for smg_daily
ALTER TABLE smg_daily ENABLE ROW LEVEL SECURITY;

-- Create RLS policies for smg_daily
CREATE POLICY "Users can view their store's SMG data" ON smg_daily
  FOR SELECT USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

CREATE POLICY "Users can insert SMG data for their store" ON smg_daily
  FOR INSERT WITH CHECK (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

CREATE POLICY "Users can update their store's SMG data" ON smg_daily
  FOR UPDATE USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

CREATE POLICY "Users can delete their store's SMG data" ON smg_daily
  FOR DELETE USING (store_id = (SELECT store_id FROM users WHERE id = auth.uid()));

-- Create indexes for better performance
CREATE INDEX idx_omega_daily_store_date ON omega_daily(store_id, business_date);
CREATE INDEX idx_interviews_store_date ON interviews(store_id, interview_date);
CREATE INDEX idx_smg_entries_store_date ON smg_entries(store_id, entry_date);
CREATE INDEX idx_smg_daily_store_date ON smg_daily(store_id, date);
CREATE INDEX idx_hires_interview_id ON hires(interview_id);
`,_t=`-- Seed data for Wendy's GM Dashboard
-- This creates a test store, user, and sample data

-- Insert SE 14th store
INSERT INTO stores (id, name) VALUES 
('550e8400-e29b-41d4-a716-446655440000', 'SE 14th');

-- Insert test GM user (password: test123)
-- Note: You'll need to create this user in Supabase Auth first, then update the ID here
INSERT INTO users (id, store_id, role) VALUES 
('550e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440000', 'gm');

-- Insert sample Omega Daily data (last 35 days for better testing)
INSERT INTO omega_daily (store_id, business_date, net_sales, last_year_sales, labor_hours, ideal_labor_hours, labor_percentage, theoretical_food_cost, food_variance_cost, waste_amount, breakfast_sales, night_sales) VALUES
-- Today and recent days
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE, 12500.00, 11800.00, 85.5, 82.0, 6.8, 3750.00, 125.00, 87.50, 3200.00, 9300.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '1 day', 11800.00, 11200.00, 82.0, 78.5, 6.9, 3540.00, 118.00, 82.60, 2950.00, 8850.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '2 days', 13200.00, 12500.00, 88.0, 85.0, 6.7, 3960.00, 132.00, 92.40, 3300.00, 9900.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '3 days', 11500.00, 10800.00, 79.5, 76.0, 6.9, 3450.00, 115.00, 80.50, 2875.00, 8625.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '4 days', 12800.00, 12100.00, 86.0, 83.0, 6.7, 3840.00, 128.00, 89.60, 3200.00, 9600.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '5 days', 12100.00, 11400.00, 81.5, 78.0, 6.7, 3630.00, 121.00, 84.70, 3025.00, 9075.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '6 days', 13500.00, 12800.00, 90.0, 87.0, 6.7, 4050.00, 135.00, 94.50, 3375.00, 10125.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '7 days', 11200.00, 10500.00, 75.5, 72.0, 6.7, 3360.00, 112.00, 78.40, 2800.00, 8400.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '8 days', 12900.00, 12200.00, 86.5, 83.5, 6.7, 3870.00, 129.00, 90.30, 3225.00, 9675.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '9 days', 11600.00, 10900.00, 78.0, 74.5, 6.7, 3480.00, 116.00, 81.20, 2900.00, 8700.00),
-- Additional days (10-34) for 30+ day testing
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '10 days', 12300.00, 11600.00, 83.0, 80.0, 6.7, 3690.00, 123.00, 86.10, 3075.00, 9225.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '11 days', 11900.00, 11300.00, 81.0, 77.5, 6.8, 3570.00, 119.00, 83.30, 2975.00, 8925.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '12 days', 13100.00, 12400.00, 87.5, 84.5, 6.7, 3930.00, 131.00, 91.70, 3275.00, 9825.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '13 days', 11700.00, 11000.00, 79.0, 75.5, 6.8, 3510.00, 117.00, 81.90, 2925.00, 8775.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '14 days', 12600.00, 11900.00, 84.5, 81.5, 6.7, 3780.00, 126.00, 88.20, 3150.00, 9450.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '15 days', 12000.00, 11300.00, 80.5, 77.0, 6.7, 3600.00, 120.00, 84.00, 3000.00, 9000.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '16 days', 13400.00, 12700.00, 89.5, 86.5, 6.7, 4020.00, 134.00, 93.80, 3350.00, 10050.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '17 days', 11400.00, 10700.00, 76.5, 73.0, 6.7, 3420.00, 114.00, 79.80, 2850.00, 8550.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '18 days', 12700.00, 12000.00, 85.0, 82.0, 6.7, 3810.00, 127.00, 88.90, 3175.00, 9525.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '19 days', 11800.00, 11100.00, 79.5, 76.0, 6.7, 3540.00, 118.00, 82.60, 2950.00, 8850.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '20 days', 13000.00, 12300.00, 87.0, 84.0, 6.7, 3900.00, 130.00, 91.00, 3250.00, 9750.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '21 days', 11600.00, 10900.00, 78.0, 74.5, 6.7, 3480.00, 116.00, 81.20, 2900.00, 8700.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '22 days', 12400.00, 11700.00, 83.5, 80.5, 6.7, 3720.00, 124.00, 86.80, 3100.00, 9300.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '23 days', 12200.00, 11500.00, 82.0, 78.5, 6.7, 3660.00, 122.00, 85.40, 3050.00, 9150.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '24 days', 13300.00, 12600.00, 88.5, 85.5, 6.7, 3990.00, 133.00, 93.10, 3325.00, 9975.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '25 days', 11300.00, 10600.00, 76.0, 72.5, 6.7, 3390.00, 113.00, 79.10, 2825.00, 8475.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '26 days', 12800.00, 12100.00, 86.0, 83.0, 6.7, 3840.00, 128.00, 89.60, 3200.00, 9600.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '27 days', 11900.00, 11200.00, 80.0, 76.5, 6.7, 3570.00, 119.00, 83.30, 2975.00, 8925.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '28 days', 13200.00, 12500.00, 88.0, 85.0, 6.7, 3960.00, 132.00, 92.40, 3300.00, 9900.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '29 days', 11500.00, 10800.00, 77.5, 74.0, 6.7, 3450.00, 115.00, 80.50, 2875.00, 8625.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '30 days', 12700.00, 12000.00, 85.5, 82.5, 6.7, 3810.00, 127.00, 88.90, 3175.00, 9525.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '31 days', 11700.00, 11000.00, 78.5, 75.0, 6.7, 3510.00, 117.00, 81.90, 2925.00, 8775.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '32 days', 12500.00, 11800.00, 84.0, 81.0, 6.7, 3750.00, 125.00, 87.50, 3125.00, 9375.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '33 days', 12100.00, 11400.00, 81.0, 77.5, 6.7, 3630.00, 121.00, 84.70, 3025.00, 9075.00),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '34 days', 13000.00, 12300.00, 87.0, 84.0, 6.7, 3900.00, 130.00, 91.00, 3250.00, 9750.00);

-- Insert sample interviews
INSERT INTO interviews (store_id, candidate_name, phone, email, position, interview_date, interview_time, status, notes) VALUES
('550e8400-e29b-41d4-a716-446655440000', 'John Smith', '555-0101', 'john.smith@email.com', 'Crew Member', CURRENT_DATE + INTERVAL '1 day', '14:00:00', 'SCHEDULED', 'Experienced in food service'),
('550e8400-e29b-41d4-a716-446655440000', 'Sarah Johnson', '555-0102', 'sarah.j@email.com', 'Shift Leader', CURRENT_DATE, '10:00:00', 'COMPLETED', 'Great communication skills, recommended for hire'),
('550e8400-e29b-41d4-a716-446655440000', 'Mike Davis', '555-0103', 'mike.d@email.com', 'Crew Member', CURRENT_DATE - INTERVAL '1 day', '15:30:00', 'NO_SHOW', 'No call, no show'),
('550e8400-e29b-41d4-a716-446655440000', 'Lisa Wilson', '555-0104', 'lisa.w@email.com', 'Crew Member', CURRENT_DATE - INTERVAL '2 days', '11:00:00', 'HIRED', 'Excellent candidate, starting next week'),
('550e8400-e29b-41d4-a716-446655440000', 'Tom Brown', '555-0105', 'tom.b@email.com', 'Crew Member', CURRENT_DATE - INTERVAL '3 days', '16:00:00', 'REJECTED', 'Not a good fit for the team');

-- Insert sample hire for Lisa Wilson
INSERT INTO hires (store_id, interview_id, documents_received, onboarding_sent_date, onboarding_completed_date, manager_reviewed_date, entered_in_system_date, fingerprint_scheduled_date, first_day, notes) VALUES
('550e8400-e29b-41d4-a716-446655440000', 
 (SELECT id FROM interviews WHERE candidate_name = 'Lisa Wilson'), 
 true, 
 CURRENT_DATE - INTERVAL '1 day', 
 CURRENT_DATE, 
 CURRENT_DATE, 
 CURRENT_DATE, 
 CURRENT_DATE + INTERVAL '3 days', 
 CURRENT_DATE + INTERVAL '7 days', 
 'Lisa is very organized and completed all requirements quickly');

-- Insert sample SMG entries (last 30 days)
INSERT INTO smg_entries (store_id, entry_date, accuracy_of_order, zone_of_defection, customer_computers, taste_of_food, osat) VALUES
-- Recent days
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE, 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '1 day', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '2 days', 4.9, 1.1, 4.7, 4.8, 4.7),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '3 days', 4.6, 1.4, 4.4, 4.5, 4.4),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '4 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '5 days', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '6 days', 4.9, 1.0, 4.8, 4.9, 4.8),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '7 days', 4.5, 1.5, 4.3, 4.4, 4.3),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '8 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '9 days', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '10 days', 4.9, 1.1, 4.7, 4.8, 4.7),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '11 days', 4.6, 1.4, 4.4, 4.5, 4.4),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '12 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '13 days', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '14 days', 4.9, 1.0, 4.8, 4.9, 4.8),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '15 days', 4.5, 1.5, 4.3, 4.4, 4.3),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '16 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '17 days', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '18 days', 4.9, 1.1, 4.7, 4.8, 4.7),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '19 days', 4.6, 1.4, 4.4, 4.5, 4.4),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '20 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '21 days', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '22 days', 4.9, 1.0, 4.8, 4.9, 4.8),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '23 days', 4.5, 1.5, 4.3, 4.4, 4.3),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '24 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '25 days', 4.7, 1.3, 4.5, 4.6, 4.5),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '26 days', 4.9, 1.1, 4.7, 4.8, 4.7),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '27 days', 4.6, 1.4, 4.4, 4.5, 4.4),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '28 days', 4.8, 1.2, 4.6, 4.7, 4.6),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '29 days', 4.7, 1.3, 4.5, 4.6, 4.5);

-- Add sample SMG daily data
INSERT INTO smg_daily (store_id, date, accuracy_decimal, zod_per_10k, cc_complaints, osat_decimal, notes) VALUES
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '1 day', 0.87, 2.50, 1.25, 0.92, 'Good day overall, slight accuracy issues during lunch rush'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '2 days', 0.91, 1.80, 0.95, 0.94, 'Improvement in accuracy, training paying off'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '3 days', 0.89, 3.20, 2.10, 0.88, 'Busy Friday, some service delays during dinner'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '4 days', 0.93, 1.50, 0.80, 0.96, 'Excellent performance, team working well together'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '5 days', 0.85, 4.10, 1.75, 0.90, 'Weekend rush, need to focus on order accuracy'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '6 days', 0.88, 2.80, 1.45, 0.91, 'Steady performance throughout the day'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '7 days', 0.92, 1.90, 1.05, 0.95, 'Great week start, team motivated'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '8 days', 0.86, 3.50, 1.85, 0.89, 'Some challenges during shift change'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '9 days', 0.90, 2.20, 1.15, 0.93, 'Solid performance across all metrics'),
('550e8400-e29b-41d4-a716-446655440000', CURRENT_DATE - INTERVAL '10 days', 0.94, 1.40, 0.75, 0.97, 'Outstanding day, new training methods working');`,Ya=ce("/setup")({component:Ba});function bt(s){navigator.clipboard.writeText(s)}function Ba(){return e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-wendys-charcoal",children:"Project Setup"}),e.jsxs("ol",{className:"list-decimal ml-5 space-y-4 text-gray-700",children:[e.jsx("li",{children:"Supabase → Auth → Providers → Email: enable. Then Auth → Users → Add user (auto-confirm)."}),e.jsx("li",{children:"Supabase → SQL Editor: paste the schema SQL, run it. Then paste the seed SQL, run it."}),e.jsxs("li",{children:["In ",e.jsx("code",{children:".env.local"})," set URL, ANON KEY, set ",e.jsx("code",{children:"VITE_USE_MOCK_DATA=false"}),", restart dev server."]})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-wendys-charcoal",children:"Schema SQL"}),e.jsx(R,{onClick:()=>bt(pt),className:"wendys-button",children:"Copy"})]}),e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-auto max-h-80 text-xs",children:pt})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-wendys-charcoal",children:"Seed SQL"}),e.jsx(R,{onClick:()=>bt(_t),className:"wendys-button",children:"Copy"})]}),e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-auto max-h-80 text-xs",children:_t})]})]})}function Y({title:s,value:n,format:r,delta:d,deltaLabel:i,icon:p,trend:m,suffix:g,sparklineData:y,className:j}){const u=x=>{if(x==null||isNaN(x))return"0";switch(r){case"currency":return ne(x);case"percentage":return Z(x);case"number":return x.toLocaleString();default:return x.toString()}},o=()=>{switch(m){case"up":return e.jsx(re,{className:"h-4 w-4 text-green-600"});case"down":return e.jsx(me,{className:"h-4 w-4 text-red-600"});case"neutral":return e.jsx(Ws,{className:"h-4 w-4 text-gray-400"})}},c=()=>{switch(m){case"up":return"text-green-600";case"down":return"text-red-600";case"neutral":return"text-gray-600"}};return e.jsx("div",{className:T("wendys-card",j),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:s}),e.jsx("div",{className:"w-8 h-8 bg-wendys-red bg-opacity-10 rounded-lg flex items-center justify-center flex-shrink-0 ml-2",children:e.jsx(p,{className:"h-4 w-4 text-wendys-red"})})]}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsxs("span",{className:"text-2xl font-bold text-wendys-charcoal",children:[u(n),g&&e.jsx("span",{className:"text-lg ml-1 font-normal",children:g})]}),y&&y.length>0&&e.jsx("div",{className:"w-16 h-8 ml-2",children:e.jsx(pe,{width:"100%",height:"100%",children:e.jsx(Ie,{data:y,children:e.jsx(Se,{type:"monotone",dataKey:"value",stroke:m==="up"?V.positive:m==="down"?V.waste:V.textSecondary,strokeWidth:1.5,dot:!1})})})})]}),d!=null&&i&&e.jsxs("div",{className:"flex items-center space-x-1 mt-3",children:[o(),e.jsxs("span",{className:T("text-sm font-medium",c()),children:[d>0?"+":"",Math.abs(d)<1&&r!=="percentage"?Z(Math.abs(d)*100):u(Math.abs(d)),g&&r!=="percentage"&&e.jsx("span",{className:"ml-1",children:g})]}),e.jsx("span",{className:"text-xs text-gray-500",children:i})]})]})})})}function Ja({data:s=[]}){const n=b.useMemo(()=>{if(!s.length){const r=[];for(let d=13;d>=0;d--){const i=new Date;i.setDate(i.getDate()-d),r.push({date:G.dateShort(i.toISOString().slice(0,10)),sales:0})}return r}return s.sort((r,d)=>new Date(r.business_date).getTime()-new Date(d.business_date).getTime()).slice(-30).map(r=>({date:G.dateShort(r.business_date),sales:r.net_sales||0}))},[s]);return e.jsx(pe,{width:"100%",height:300,children:e.jsxs(Ie,{data:n,children:[e.jsx(ve,{...H.cartesianGrid}),e.jsx(we,{dataKey:"date",...H.xAxis}),e.jsx(je,{...H.yAxis,tickFormatter:r=>G.currencyCompact(r)}),e.jsx(Ee,{...H.tooltip,formatter:r=>[G.currencyDetailed(r),"Net Sales"]}),e.jsx(Se,{type:"monotone",dataKey:"sales",stroke:V.sales,strokeWidth:3,dot:{fill:V.sales,strokeWidth:2,r:4},activeDot:{r:6,stroke:V.salesSecondary,strokeWidth:2}})]})})}function Xa({data:s=[]}){console.log("🔍 LaborVsIdealChart received data:",s.slice(0,3));const n=b.useMemo(()=>{if(!s.length){const d=[];for(let i=6;i>=0;i--){const p=new Date;p.setDate(p.getDate()-i),d.push({date:G.dateShort(p.toISOString().slice(0,10)),ideal:0,actual:0})}return d}const r=s.sort((d,i)=>new Date(d.business_date).getTime()-new Date(i.business_date).getTime()).slice(-30).map(d=>{const i=Number(d.ideal_labor_hours)||0,p=Number(d.labor_hours)||0;return console.log("🔍 Processing entry:",d.business_date,"ideal:",d.ideal_labor_hours,"=>",i,"actual:",d.labor_hours,"=>",p),{date:G.dateShort(d.business_date),ideal:i,actual:p}});return console.log("🔍 Processed chart data:",r.slice(0,3)),r},[s]);return console.log("🔍 Final chartData being rendered:",n.slice(0,3)),e.jsx(pe,{width:"100%",height:300,children:e.jsxs(Bt,{data:n,children:[e.jsx(ve,{...H.cartesianGrid}),e.jsx(we,{dataKey:"date",...H.xAxis}),e.jsx(je,{...H.yAxis,tickFormatter:r=>G.hours(r)}),e.jsx(Ee,{...H.tooltip,formatter:(r,d)=>[G.hours(r),d==="ideal"?"Ideal Hours":"Actual Hours"]}),e.jsx(Hs,{...H.legend}),e.jsx(Jt,{dataKey:"ideal",fill:V.laborIdeal,opacity:.6,name:"Ideal Hours"}),e.jsx(Se,{type:"monotone",dataKey:"actual",stroke:V.labor,strokeWidth:3,dot:{fill:V.labor,strokeWidth:2,r:4},activeDot:{r:6,stroke:V.textPrimary,strokeWidth:2},name:"Actual Hours"})]})})}function Za(){const[s,n]=b.useState(null);b.useEffect(()=>{let u=!0;return(async()=>{var c;const{data:o}=await E.from("users").select("store_id").eq("id",(c=(await E.auth.getUser()).data.user)==null?void 0:c.id).single();u&&n((o==null?void 0:o.store_id)??null)})(),()=>{u=!1}},[]);const{data:r=[],isLoading:d}=B({queryKey:["smg_snapshot",s],queryFn:async()=>{if(!s)return[];const u=new Date;u.setDate(u.getDate()-30);const{data:o,error:c}=await E.from("smg_daily").select("*").eq("store_id",s).gte("date",u.toISOString().split("T")[0]).order("date",{ascending:!1});if(c)throw c;return o||[]},enabled:!!s}),i=r.length>0?{accuracy:r.reduce((u,o)=>u+o.accuracy_decimal,0)/r.length,zod:r.reduce((u,o)=>u+o.zod_per_10k,0)/r.length,complaints:r.reduce((u,o)=>u+o.cc_complaints,0)/r.length,osat:r.reduce((u,o)=>u+o.osat_decimal,0)/r.length}:{accuracy:0,zod:0,complaints:0,osat:0},p=u=>{if(u.length<4)return"neutral";const o=Math.floor(u.length/2),c=u.slice(0,o).reduce((D,N)=>D+N,0)/o,v=u.slice(o).reduce((D,N)=>D+N,0)/(u.length-o)-c;return Math.abs(v)<.1?"neutral":v>0?"up":"down"},m={accuracy:p(r.map(u=>u.accuracy_decimal).reverse()),zod:p(r.map(u=>u.zod_per_10k).reverse()),complaints:p(r.map(u=>u.cc_complaints).reverse()),osat:p(r.map(u=>u.osat_decimal).reverse())},g=(u,o=!1)=>o?u<=1?"text-green-600":u<=3?"text-yellow-600":"text-red-600":u>=90?"text-green-600":u>=80?"text-yellow-600":"text-red-600",y=(u,o=!1)=>o?u<=1?e.jsx(Pe,{className:"h-4 w-4 text-green-600"}):u<=3?e.jsx(be,{className:"h-4 w-4 text-yellow-600"}):e.jsx(be,{className:"h-4 w-4 text-red-600"}):u>=90?e.jsx(Pe,{className:"h-4 w-4 text-green-600"}):u>=80?e.jsx(be,{className:"h-4 w-4 text-yellow-600"}):e.jsx(be,{className:"h-4 w-4 text-red-600"}),j=u=>{switch(u){case"up":return e.jsx(re,{className:"h-3 w-3 text-green-600"});case"down":return e.jsx(me,{className:"h-3 w-3 text-red-600"});default:return null}};return d?e.jsx("div",{className:"wendys-card",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 mb-4"}),e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((u,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32 mt-1"})]})]}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-12"})]},o))})]})}):e.jsxs("div",{className:"wendys-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:"OSAT Snapshot (Last 30 Days)"}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(he,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{children:[r.length," entries"]})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(he,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"No OSAT data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add entries in the OSAT tab to see metrics"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-wendys-charcoal",children:"OSAT Score"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Overall satisfaction"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j(m.osat),y(i.osat),e.jsx("span",{className:T("text-xl font-bold",g(i.osat)),children:(i.osat??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Pe,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-wendys-charcoal",children:"Accuracy of Order"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Order accuracy metric"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j(m.accuracy),y(i.accuracy),e.jsx("span",{className:T("text-xl font-bold",g(i.accuracy)),children:(i.accuracy??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-wendys-charcoal",children:"ZOD per 10k"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Zone of defection"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j(m.zod==="up"?"down":m.zod==="down"?"up":"neutral"),y(i.zod,!0),e.jsx("span",{className:T("text-xl font-bold",g(i.zod,!0)),children:(i.zod??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-wendys-charcoal",children:"CC Complaints"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Customer complaints"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j(m.complaints==="up"?"down":m.complaints==="down"?"up":"neutral"),y(i.complaints,!0),e.jsx("span",{className:T("text-xl font-bold",g(i.complaints,!0)),children:(i.complaints??0).toFixed(1)})]})]})]})]})}function er(){const[s,n]=b.useState(null),r=L(new Date,"EEEE, MMMM d"),d=L(new Date,"yyyy-MM-dd");b.useEffect(()=>{let g=!0;return(async()=>{var x;console.log("🔐 [InterviewsToday] Checking user authentication...");const{data:y,error:j}=await E.auth.getUser();console.log("👤 [InterviewsToday] Auth data:",y,"Auth error:",j);const u=(x=y.user)==null?void 0:x.id;if(!u){console.log("❌ [InterviewsToday] No user ID found - user not authenticated");return}console.log("🔍 [InterviewsToday] Looking up store for user:",u);const{data:o,error:c}=await E.from("users").select("store_id").eq("id",u).maybeSingle();if(console.log("🏪 [InterviewsToday] Store lookup result - data:",o,"error:",c),!!g){if(c){console.error("❌ [InterviewsToday] Store lookup error:",c);return}n((o==null?void 0:o.store_id)??null),console.log("✅ [InterviewsToday] Store ID set to:",(o==null?void 0:o.store_id)??null)}})(),()=>{g=!1}},[]);const{data:i=[],isLoading:p}=B({queryKey:["interviews-today",s,d],queryFn:async()=>{if(!s)return[];const{data:g,error:y}=await E.from("interviews").select("*").eq("store_id",s).eq("interview_date",d).order("interview_time",{ascending:!0});if(y)throw y;return g||[]},enabled:!!s}),m=g=>L(new Date(`2000-01-01T${g}`),"h:mm a");return e.jsxs("div",{className:"wendys-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:"Interviews Today"}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:r})]})]}),p?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Wt,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No interviews scheduled for today"})]}):e.jsx("div",{className:"space-y-3",children:i.map(g=>e.jsx(He,{to:"/interviews",className:"block p-4 border border-gray-200 rounded-lg hover:border-wendys-red hover:shadow-md transition-all duration-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-medium text-wendys-charcoal",children:g.candidate_name}),e.jsx("span",{className:tr("px-2 py-1 text-xs font-medium rounded-full",ns(g.status)),children:g.status.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"h-3 w-3"}),e.jsx("span",{children:g.position})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx($e,{className:"h-3 w-3"}),e.jsx("span",{children:m(g.interview_time)})]})]}),g.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 italic",children:['"',g.notes,'"']})]})})},g.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs(He,{to:"/interviews",className:"inline-flex items-center space-x-2 text-wendys-red hover:text-wendys-dark-red font-medium text-sm",children:[e.jsx("span",{children:"View all interviews"}),e.jsx("span",{children:"→"})]})})]})}function tr(...s){return s.filter(Boolean).join(" ")}const Nt=[{key:"today",label:"Today"},{key:"wtd",label:"WTD",description:"Week to Date"},{key:"mtd",label:"MTD",description:"Month to Date"},{key:"last7",label:"Last 7",description:"Last 7 Days"},{key:"last30",label:"Last 30",description:"Last 30 Days"},{key:"custom",label:"Custom"}];function it({selectedRange:s="last30",selectedDate:n,onRangeChange:r,onDateChange:d,onClearFilters:i,className:p,compact:m=!1}){const g=s!=="last30"||n,y=u=>{r==null||r(u),u!=="custom"&&(d==null||d(void 0))},j=()=>{if(s==="custom"&&n)return L(n,"MMM dd, yyyy");const u=Nt.find(o=>o.key===s);return(u==null?void 0:u.label)||"Last 30"};return e.jsxs("div",{className:T("flex items-center gap-3 p-4 bg-gray-50 rounded-lg border",m&&"p-3",p),children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsx("span",{className:T("text-sm font-medium",m&&"hidden sm:inline"),children:"Filters:"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Nt.map(u=>e.jsx(R,{variant:s===u.key?"default":"ghost",size:"sm",onClick:()=>y(u.key),className:T("text-xs h-7 px-2",s===u.key?"bg-wendys-red text-white hover:bg-wendys-red/90":"text-gray-600 hover:text-gray-900 hover:bg-gray-100",m&&"text-[11px] h-6 px-1.5"),title:u.description,children:u.label},u.key))}),s==="custom"&&e.jsxs(Ke,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",className:T("justify-start text-left font-normal h-7",!n&&"text-muted-foreground",m&&"h-6 text-xs"),children:[e.jsx(ie,{className:"mr-1 h-3 w-3"}),n?L(n,"MMM dd"):"Pick date"]})}),e.jsx(Fe,{className:"w-auto p-0",align:"start",children:e.jsx(ke,{mode:"single",selected:n,onSelect:d,initialFocus:!0})})]}),!m&&g&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-gray-500 border-l pl-3 ml-1",children:[e.jsx("span",{children:"Showing:"}),e.jsx("span",{className:"font-medium text-gray-700",children:j()})]}),g&&i&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:i,className:T("text-xs text-gray-500 hover:text-gray-700 h-7 px-2",m&&"h-6 px-1.5"),children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Clear"]})]})}function ot(s,n="last30"){const[r,d]=ye.useState(()=>typeof window<"u"&&localStorage.getItem(`${s}_range`)||n),[i,p]=ye.useState(()=>{if(typeof window<"u"){const u=localStorage.getItem(`${s}_date`);if(u){const[o,c,x]=u.split("-").map(Number);return new Date(o,(c||1)-1,x||1)}return}}),m=ye.useCallback(u=>{d(u),typeof window<"u"&&localStorage.setItem(`${s}_range`,u)},[s]),g=ye.useCallback(u=>{if(p(u),typeof window<"u")if(u){const o=L(u,"yyyy-MM-dd");localStorage.setItem(`${s}_date`,o)}else localStorage.removeItem(`${s}_date`)},[s]),y=ye.useCallback(()=>{d(n),p(void 0),typeof window<"u"&&(localStorage.removeItem(`${s}_range`),localStorage.removeItem(`${s}_date`))},[s,n]),j=ye.useCallback(()=>{if(r==="custom"&&i){const u=L(i,"yyyy-MM-dd");return{start:u,end:u}}if(r&&r!=="custom"){const u=Ze(r);return u.start?{start:u.start,end:u.end}:null}return null},[r,i]);return{selectedRange:r,selectedDate:i,handleRangeChange:m,handleDateChange:g,clearFilters:y,getDateRangeFilter:j,getSelectedLabel:()=>r==="custom"&&i?L(i,"MMM dd, yyyy"):Ze(r).label}}const sr=ce("/overview")({component:ar});function ar(){const[s,n]=b.useState(null),r=ot("overview","today");b.useEffect(()=>{let c=!0;return(async()=>{var h;const{data:x}=await E.auth.getUser(),v=(h=x.user)==null?void 0:h.id;if(!v)return;const{data:D,error:N}=await E.from("users").select("store_id").eq("id",v).maybeSingle();if(c){if(N){console.error("Error fetching store ID:",N);return}n((D==null?void 0:D.store_id)??null)}})(),()=>{c=!1}},[]);const d=r.getDateRangeFilter(),{data:i=[]}=B({queryKey:["overview-charts",s],queryFn:async()=>{if(!s)return[];const c=new Date;c.setDate(c.getDate()-30);const x=c.toISOString().slice(0,10),{data:v,error:D}=await E.from("omega_daily").select("*").eq("store_id",s).gte("business_date",x).order("business_date",{ascending:!0});if(D)throw D;return v||[]},enabled:!!s}),{data:p=[],isLoading:m,error:g}=B({queryKey:["overview-omega",s,d==null?void 0:d.start,d==null?void 0:d.end],queryFn:async()=>{if(!s)return[];let c=E.from("omega_daily").select("*").eq("store_id",s);d&&(c=c.gte("business_date",d.start).lte("business_date",d.end));const{data:x,error:v}=await c.order("business_date",{ascending:!0});if(v)throw v;return x||[]},enabled:!!s}),{data:y=[]}=B({queryKey:["overview-weekending",s,d==null?void 0:d.start,d==null?void 0:d.end],queryFn:async()=>{if(!s)return[];let c=E.from("weekending_sheet").select("*").eq("store_id",s);d&&(c=c.gte("week_ending_date",d.start).lte("week_ending_date",d.end));const{data:x,error:v}=await c.order("week_ending_date",{ascending:!0});if(v)throw v;return x||[]},enabled:!!s}),{data:j=[]}=B({queryKey:["overview-weekending-charts",s],queryFn:async()=>{if(!s)return[];const c=new Date;c.setDate(c.getDate()-84);const x=c.toISOString().slice(0,10),{data:v,error:D}=await E.from("weekending_sheet").select("*").eq("store_id",s).gte("week_ending_date",x).order("week_ending_date",{ascending:!0});if(D)throw D;return v||[]},enabled:!!s}),u=b.useMemo(()=>{if(p.length===0)return{netSales:0,compNetSales:0,laborHours:0,idealLaborHours:0,laborPercentage:0,foodVarianceCost:0,foodVariancePercentage:0,wasteAmount:0,wastePercentage:0,breakfastSales:0,nightSales:0};const c=p.reduce((N,h)=>({netSales:N.netSales+(h.net_sales||0),compNetSales:N.compNetSales+((h.net_sales||0)-(h.last_year_sales||0)),laborHours:N.laborHours+(h.labor_hours||0),idealLaborHours:N.idealLaborHours+(h.ideal_labor_hours||0),foodVarianceCost:N.foodVarianceCost+(h.food_variance_cost||0),wasteAmount:N.wasteAmount+(h.waste_amount||0),breakfastSales:N.breakfastSales+(h.breakfast_sales||0),nightSales:N.nightSales+(h.night_sales||0)}),{netSales:0,compNetSales:0,laborHours:0,idealLaborHours:0,foodVarianceCost:0,wasteAmount:0,breakfastSales:0,nightSales:0}),x=c.netSales>0?c.laborHours/c.netSales*100:0,v=c.netSales>0?c.foodVarianceCost/c.netSales*100:0,D=c.netSales>0?c.wasteAmount/c.netSales*100:0;return{...c,laborPercentage:x,foodVariancePercentage:v,wastePercentage:D}},[p]),o=b.useMemo(()=>{if(y.length===0)return{weeklyNetSales:0,weeklyLabor:0,weeklyFoodVariance:0,weeklyBreakfastSales:0,weeklyLateNightSales:0,weeklyOnboarding:0,weeklyCrewQuiz:0,weeklyMgrQuiz:0,weeklyNewHires:0,weeklyTerminations:0};const c=y.reduce((N,h)=>({weeklyNetSales:N.weeklyNetSales+(h.net_sales||0),weeklyLabor:N.weeklyLabor+(h.labor||0),weeklyFoodVariance:N.weeklyFoodVariance+(h.food_variance_percentage||0),weeklyBreakfastSales:N.weeklyBreakfastSales+(h.breakfast_sales||0),weeklyLateNightSales:N.weeklyLateNightSales+(h.late_night_sales||0),weeklyOnboarding:N.weeklyOnboarding+(h.onboarding?1:0),weeklyCrewQuiz:N.weeklyCrewQuiz+(h.crew_food_safety_quiz||0),weeklyMgrQuiz:N.weeklyMgrQuiz+(h.mgr_food_safety_quiz||0),weeklyNewHires:N.weeklyNewHires+(h.new_hire_name?1:0),weeklyTerminations:N.weeklyTerminations+(h.terminations?1:0)}),{weeklyNetSales:0,weeklyLabor:0,weeklyFoodVariance:0,weeklyBreakfastSales:0,weeklyLateNightSales:0,weeklyOnboarding:0,weeklyCrewQuiz:0,weeklyMgrQuiz:0,weeklyNewHires:0,weeklyTerminations:0}),x=y.length>0?c.weeklyCrewQuiz/y.length:0,v=y.length>0?c.weeklyMgrQuiz/y.length:0,D=y.length>0?c.weeklyFoodVariance/y.length:0;return{...c,avgCrewQuiz:x,avgMgrQuiz:v,avgFoodVariance:D}},[y]);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-wendys-charcoal",children:"Overview"}),e.jsxs("p",{className:"text-gray-600",children:["Key metrics and performance indicators for ",r.getSelectedLabel(),m&&e.jsx("span",{className:"ml-2 text-sm",children:"(Loading...)"})]}),g&&e.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:["Error loading data: ",g.message]})]}),e.jsx(it,{selectedRange:r.selectedRange,selectedDate:r.selectedDate,onRangeChange:r.handleRangeChange,onDateChange:r.handleDateChange,onClearFilters:r.clearFilters,compact:!0})]}),e.jsx("div",{className:"wendys-card",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full rounded-lg shadow-lg opacity-60",style:{height:"200px",objectFit:"cover",width:"100%",pointerEvents:"none"},children:[e.jsx("source",{src:"/banner-video.mp4",type:"video/mp4"}),e.jsx("p",{children:"Your browser does not support the video tag."})]})})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(Y,{title:"Net Sales",value:u.netSales,format:"currency",delta:u.compNetSales,deltaLabel:"vs Last Year",icon:qe,trend:u.compNetSales>=0?"up":"down"}),e.jsx(Y,{title:"Labor Hours",value:u.laborHours,format:"number",delta:u.laborHours-u.idealLaborHours,deltaLabel:"vs Ideal",icon:$e,trend:u.laborHours>u.idealLaborHours?"down":"up",suffix:"hrs"}),e.jsx(Y,{title:"Labor %",value:u.laborPercentage,format:"percentage",icon:re,trend:"neutral"}),e.jsx(Y,{title:"Food Variance",value:u.foodVarianceCost,format:"currency",delta:u.foodVariancePercentage,deltaLabel:"% of Sales",icon:me,trend:u.foodVarianceCost>=0?"down":"up"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(Y,{title:"Waste Amount",value:u.wasteAmount,format:"currency",delta:u.wastePercentage,deltaLabel:"% of Sales",icon:me,trend:u.wasteAmount>=0?"down":"up"}),e.jsx(Y,{title:"Breakfast Sales",value:u.breakfastSales,format:"currency",icon:qe,trend:"neutral"}),e.jsx(Y,{title:"Night Sales",value:u.nightSales,format:"currency",icon:qe,trend:"neutral"}),e.jsx(Y,{title:"Comp Net Sales",value:u.compNetSales,format:"currency",icon:re,trend:u.compNetSales>=0?"up":"down"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(Y,{title:"Weekly Net Sales",value:o.weeklyNetSales,format:"currency",icon:qe,trend:"neutral"}),e.jsx(Y,{title:"Weekly Labor",value:o.weeklyLabor,format:"currency",icon:$e,trend:"neutral"}),e.jsx(Y,{title:"Avg Food Variance %",value:o.avgFoodVariance,format:"percentage",icon:me,trend:o.avgFoodVariance>=0?"down":"up"}),e.jsx(Y,{title:"Weekly Onboarding",value:o.weeklyOnboarding,format:"number",icon:re,trend:"neutral"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(Y,{title:"Avg Crew Quiz Score",value:o.avgCrewQuiz,format:"number",icon:re,trend:"neutral",suffix:"/100"}),e.jsx(Y,{title:"Avg MGR Quiz Score",value:o.avgMgrQuiz,format:"number",icon:re,trend:"neutral",suffix:"/100"}),e.jsx(Y,{title:"Weekly New Hires",value:o.weeklyNewHires,format:"number",icon:re,trend:"neutral"}),e.jsx(Y,{title:"Weekly Terminations",value:o.weeklyTerminations,format:"number",icon:me,trend:"neutral"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx(xe,{title:"Net Sales Trend",subtitle:"Last 30 days",loading:!i.length&&!g,error:g==null?void 0:g.message,children:i.length>0?e.jsx(Ja,{data:i}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No chart data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add entries in OMEGA Daily to see trends"})]})})}),e.jsx(xe,{title:"Labor Hours vs Ideal",subtitle:"Last 30 days",loading:!i.length&&!g,error:g==null?void 0:g.message,children:i.length>0?e.jsx(Xa,{data:i}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No chart data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add entries in OMEGA Daily to see trends"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx(xe,{title:"Weekly Net Sales Trend",subtitle:"Last 12 weeks",loading:!j.length&&!g,error:g==null?void 0:g.message,children:j.length>0?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-wendys-charcoal",children:ne(o.weeklyNetSales)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Weekly Sales"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[j.length," weeks of data"]})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No weekly data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add entries in Weekending Sheet to see trends"})]})})}),e.jsx(xe,{title:"Weekly Training Metrics",subtitle:"Last 12 weeks",loading:!j.length&&!g,error:g==null?void 0:g.message,children:j.length>0?e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-medium text-wendys-charcoal",children:[(o.avgCrewQuiz??0).toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Crew Quiz"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-medium text-wendys-charcoal",children:[(o.avgMgrQuiz??0).toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg MGR Quiz"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-wendys-charcoal",children:o.weeklyOnboarding}),e.jsx("p",{className:"text-sm text-gray-600",children:"Onboarding"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-wendys-charcoal",children:o.weeklyNewHires}),e.jsx("p",{className:"text-sm text-gray-600",children:"New Hires"})]})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No training data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add entries in Weekending Sheet to see metrics"})]})})})]}),e.jsxs("div",{className:"wendys-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal mb-4",children:"Data Integration Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Daily Entries"}),e.jsx("p",{className:"text-2xl font-bold text-wendys-charcoal",children:p.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"OMEGA Daily records"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Weekly Entries"}),e.jsx("p",{className:"text-2xl font-bold text-wendys-charcoal",children:y.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Weekending records"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales"}),e.jsx("p",{className:"text-2xl font-bold text-wendys-charcoal",children:ne(u.netSales+o.weeklyNetSales)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Combined daily + weekly"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Data Coverage"}),e.jsx("p",{className:"text-2xl font-bold text-wendys-charcoal",children:p.length>0||y.length>0?"Active":"No Data"}),e.jsx("p",{className:"text-xs text-gray-500",children:"System status"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Za,{}),e.jsx(er,{})]})]})}function rr({columns:s,data:n,mobileCardRender:r,className:d,emptyMessage:i="No data available",loading:p=!1}){if(p)return e.jsx(nr,{columns:s});const m=g=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-2",children:s.map(y=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[y.label,":"]}),e.jsx("span",{className:"text-sm",children:y.render?y.render(g[y.key],g):g[y.key]})]},y.key))});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:T("hidden md:block",d),children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-200",children:s.map(g=>e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700 text-sm",children:g.label},g.key))})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:s.length,className:"py-8 px-4 text-center text-gray-500",children:i})}):n.map((g,y)=>e.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:s.map(j=>e.jsx("td",{className:T("py-3 px-4 text-sm",j.className),children:j.render?j.render(g[j.key],g):g[j.key]},j.key))},g.id||y))})]})})}),e.jsx("div",{className:"md:hidden",children:e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:i}):n.map((g,y)=>e.jsx("div",{children:r?r(g):m(g)},g.id||y))})})]})}function nr({columns:s}){return e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-200",children:s.map(n=>e.jsx("th",{className:"py-3 px-4",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})},n.key))})}),e.jsx("tbody",{children:[...Array(3)].map((n,r)=>e.jsx("tr",{className:"border-b border-gray-100",children:s.map(d=>e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"h-4 bg-gray-100 rounded w-full"})},d.key))},r))})]})})})}const ir=ce("/omega-daily")({component:or});function or(){const[s,n]=b.useState(!1),[r,d]=b.useState(null),{toast:i}=oe(),p=Ce(),[m,g]=b.useState(null),y=ot("omega-daily","last30"),j=async()=>{if(!m){i({title:"Store not linked",description:"Please link your account to a store first.",variant:"destructive"});return}try{const t=[],l=new Date;for(let _=9;_>=0;_--){const k=new Date(l);k.setDate(k.getDate()-_),t.push({store_id:m,business_date:L(k,"yyyy-MM-dd"),net_sales:Math.floor(Math.random()*5e3)+8e3,last_year_sales:Math.floor(Math.random()*4e3)+7e3,labor_hours:Math.floor(Math.random()*40)+60,ideal_labor_hours:Math.floor(Math.random()*30)+50,labor_percentage:Math.floor(Math.random()*10)+15,theoretical_food_cost:Math.floor(Math.random()*2e3)+3e3,food_variance_cost:Math.floor(Math.random()*200)-100,waste_amount:Math.floor(Math.random()*100)+50,breakfast_sales:Math.floor(Math.random()*1e3)+500,night_sales:Math.floor(Math.random()*1500)+1e3})}const{error:a}=await E.from("omega_daily").insert(t);if(a)throw a;i({title:"Sample data added!",description:"10 days of sample OMEGA entries have been created."}),p.invalidateQueries({queryKey:["omega_daily"]})}catch(t){i({title:"Error adding sample data",description:t.message,variant:"destructive"})}},u=()=>{p.invalidateQueries({queryKey:["omega_daily",m]}),i({title:"Refreshing data...",description:"Reloading your OMEGA entries."})},o=Me({resolver:Oe(Fa),defaultValues:{business_date:L(new Date,"yyyy-MM-dd"),net_sales:0,last_year_sales:0,labor_hours:0,ideal_labor_hours:0,labor_percentage:0,theoretical_food_cost:0,food_variance_cost:0,waste_amount:0,breakfast_sales:0,night_sales:0}}),c=ee({onMutate:async t=>{if(!m)throw new Error("No store is linked to your account. See Setup to link one.");await p.cancelQueries({queryKey:["omega_daily"]});const l=`temp-${Date.now()}`,a={id:l,store_id:m,business_date:t.business_date,net_sales:t.net_sales,last_year_sales:t.last_year_sales,labor_hours:t.labor_hours,ideal_labor_hours:t.ideal_labor_hours,labor_percentage:t.labor_percentage,theoretical_food_cost:t.theoretical_food_cost,food_variance_cost:t.food_variance_cost,waste_amount:t.waste_amount,breakfast_sales:t.breakfast_sales,night_sales:t.night_sales},_=[],k=p.getQueriesData({queryKey:["omega_daily"]});for(const[z,se]of k){const X=z;if(!X.includes(m))continue;let K=!0;const lt=typeof X[2]=="string"?String(X[2]):void 0,dt=typeof X[3]=="string"?String(X[3]):void 0;if(lt&&dt&&(K=t.business_date>=lt&&t.business_date<=dt),!K)continue;const ct=[a,...se||[]];ct.sort((mt,ut)=>mt.business_date>ut.business_date?-1:mt.business_date<ut.business_date?1:0),_.push({queryKey:z,previousData:se}),p.setQueryData(z,ct)}return{optimisticId:l,touchedCaches:_}},mutationFn:async t=>{if(console.log("🔄 Starting insertMutation with payload:",t),console.log("🏪 Store ID:",m),!m)throw console.error("❌ No store ID found"),new Error("No store is linked to your account. See Setup to link one.");const l={store_id:m,business_date:t.business_date,net_sales:t.net_sales,last_year_sales:t.last_year_sales,labor_hours:t.labor_hours,ideal_labor_hours:t.ideal_labor_hours,labor_percentage:t.labor_percentage,theoretical_food_cost:t.theoretical_food_cost,food_variance_cost:t.food_variance_cost,waste_amount:t.waste_amount,breakfast_sales:t.breakfast_sales,night_sales:t.night_sales};console.log("📤 Inserting data:",l);const{data:a,error:_}=await E.from("omega_daily").insert(l).select();if(console.log("📥 Supabase response - data:",a,"error:",_),_)throw console.error("❌ Supabase error:",_),_;return console.log("✅ Insert successful:",a),a},onError:(t,l,a)=>{if(a!=null&&a.touchedCaches)for(const{queryKey:_,previousData:k}of a.touchedCaches)p.setQueryData(_,k||[]);console.error("💥 Insert mutation failed (rolled back):",t),i({title:"Save failed",description:(t==null?void 0:t.message)||"Unable to save entry.",variant:"destructive"})},onSuccess:(t,l,a)=>{console.log("🎉 Insert mutation succeeded with data:",t),i({title:"Success!",description:"Daily metrics saved successfully."});const _=Array.isArray(t)&&t[0]?t[0]:void 0;if(_&&(a!=null&&a.touchedCaches)&&a.optimisticId)for(const{queryKey:k}of a.touchedCaches){const se=(p.getQueryData(k)??[]).map(X=>X.id===a.optimisticId?_:X);p.setQueryData(k,se)}n(!1),d(null),o.reset(),p.invalidateQueries({queryKey:["omega_daily"]})}}),x=ee({mutationFn:async({id:t,payload:l})=>{if(!m)throw new Error("No store is linked to your account. See Setup to link one.");const{error:a}=await E.from("omega_daily").update({business_date:l.business_date,net_sales:l.net_sales,last_year_sales:l.last_year_sales,labor_hours:l.labor_hours,ideal_labor_hours:l.ideal_labor_hours,labor_percentage:l.labor_percentage,theoretical_food_cost:l.theoretical_food_cost,food_variance_cost:l.food_variance_cost,waste_amount:l.waste_amount,breakfast_sales:l.breakfast_sales,night_sales:l.night_sales}).eq("id",t);if(a)throw a},onSuccess:()=>{i({title:"Updated!",description:"Daily metrics updated successfully."}),n(!1),d(null),o.reset(),p.invalidateQueries({queryKey:["omega_daily"]})},onError:t=>{i({title:"Update failed",description:t.message,variant:"destructive"})}}),v=t=>{console.log("🚀 onSubmit called with data:",t),console.log("📋 Form errors:",o.formState.errors),console.log("🏪 Store ID:",m),console.log("✏️ Editing entry:",r),console.log("🔄 Insert mutation pending:",c.isPending),console.log("🔄 Update mutation pending:",x.isPending),r?(console.log("📝 Calling updateMutation..."),x.mutate({id:r.id,payload:t})):(console.log("➕ Calling insertMutation..."),c.mutate(t))},D=t=>{console.error("❌ Form validation failed with errors:",t),i({title:"Validation Error",description:"Please check the form for errors and try again.",variant:"destructive"})},N=ee({mutationFn:async t=>{const{error:l}=await E.from("omega_daily").delete().eq("id",t);if(l)throw l},onSuccess:()=>{i({title:"Deleted",description:"Daily metrics entry removed."}),p.invalidateQueries({queryKey:["omega_daily"]})},onError:t=>{i({title:"Delete failed",description:t.message,variant:"destructive"})}});b.useEffect(()=>{let t=!0;return(async()=>{var se;console.log("🔐 Checking user authentication...");const{data:l,error:a}=await E.auth.getUser();console.log("👤 Auth data:",l,"Auth error:",a);const _=(se=l.user)==null?void 0:se.id;if(!_){console.log("❌ No user ID found - user not authenticated");return}console.log("🔍 Looking up store for user:",_);const{data:k,error:z}=await E.from("users").select("store_id").eq("id",_).maybeSingle();if(console.log("🏪 Store lookup result - data:",k,"error:",z),!!t){if(z){console.error("❌ Store lookup error:",z),i({title:"Connection Error",description:"Unable to connect to your store. Please check your setup.",variant:"destructive"});return}g((k==null?void 0:k.store_id)??null),console.log("✅ Store ID set to:",(k==null?void 0:k.store_id)??null),k!=null&&k.store_id||(console.log("⚠️ No store linked to user account"),i({title:"Store Not Linked",description:"Your account isn't linked to a store yet. Please go to Setup to link your account.",variant:"destructive"}))}})(),()=>{t=!1}},[]);const h=y.getDateRangeFilter(),{data:w=[],isLoading:A,error:O}=B({queryKey:["omega_daily",m,h==null?void 0:h.start,h==null?void 0:h.end],queryFn:async()=>{if(!m)return[];let t=E.from("omega_daily").select("*").eq("store_id",m);h&&(t=t.gte("business_date",h.start).lte("business_date",h.end));const{data:l,error:a}=await t.order("business_date",{ascending:!1}).limit(100);if(a)throw a;return l},enabled:!!m}),{data:W=[]}=B({queryKey:["omega_daily_charts",m],queryFn:async()=>{if(!m)return[];const t=new Date;t.setDate(t.getDate()-30);const l=L(t,"yyyy-MM-dd"),{data:a,error:_}=await E.from("omega_daily").select("*").eq("store_id",m).gte("business_date",l).order("business_date",{ascending:!0});if(_)throw _;return a},enabled:!!m}),{data:$=[]}=B({queryKey:["omega_daily_mtd",m],queryFn:async()=>{if(!m)return[];const{start:t,end:l}=Ze("mtd"),{data:a,error:_}=await E.from("omega_daily").select("*").eq("store_id",m).gte("business_date",t).lte("business_date",l).order("business_date",{ascending:!0});if(_)throw _;return a},enabled:!!m}),q=t=>{if(!t)return;y.handleRangeChange("custom");const l=Number(t.slice(0,4)),a=Number(t.slice(5,7)),_=Number(t.slice(8,10));y.handleDateChange(new Date(l,(a||1)-1,_||1))},te=b.useMemo(()=>W.length?W.map(t=>({date:G.dateShort(t.business_date),dateFull:G.dateFull(t.business_date),isoDate:(typeof t.business_date=="string",t.business_date),comp_net_sales_percentage:t.last_year_sales?(t.net_sales-t.last_year_sales)/t.last_year_sales*100:0})):[],[W]),f=b.useMemo(()=>W.length?W.map(t=>({date:G.dateShort(t.business_date),dateFull:G.dateFull(t.business_date),isoDate:(typeof t.business_date=="string",t.business_date),waste_percentage:t.net_sales?t.waste_amount/t.net_sales*100:0,food_variance_percentage:t.net_sales?-(t.food_variance_cost/t.net_sales)*100:0})):[],[W]),I=t=>{d(t);const l={business_date:t.business_date||L(new Date,"yyyy-MM-dd"),net_sales:t.net_sales!=null?Number(t.net_sales):0,last_year_sales:t.last_year_sales!=null?Number(t.last_year_sales):0,labor_hours:t.labor_hours!=null?Number(t.labor_hours):0,ideal_labor_hours:t.ideal_labor_hours!=null?Number(t.ideal_labor_hours):0,labor_percentage:t.labor_percentage!=null?Number(t.labor_percentage):0,theoretical_food_cost:t.theoretical_food_cost!=null?Number(t.theoretical_food_cost):0,food_variance_cost:t.food_variance_cost!=null?Number(t.food_variance_cost):0,waste_amount:t.waste_amount!=null?Number(t.waste_amount):0,breakfast_sales:t.breakfast_sales!=null?Number(t.breakfast_sales):0,night_sales:t.night_sales!=null?Number(t.night_sales):0};o.reset(l),n(!0)},Q=t=>{N.mutate(t)},F=o.watch(),J=F.last_year_sales>0?(F.net_sales-F.last_year_sales)/F.last_year_sales*100:0,M=F.labor_hours-F.ideal_labor_hours,Ue=F.net_sales>0?F.food_variance_cost/F.net_sales*100:0,fe=F.net_sales>0?F.waste_amount/F.net_sales*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-wendys-charcoal",children:"Omega Daily"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Daily business metrics and performance tracking"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2 md:items-center",children:[e.jsxs(R,{onClick:()=>{d(null),o.reset({business_date:L(new Date,"yyyy-MM-dd"),net_sales:0,last_year_sales:0,labor_hours:0,ideal_labor_hours:0,labor_percentage:0,theoretical_food_cost:0,food_variance_cost:0,waste_amount:0,breakfast_sales:0,night_sales:0}),n(!0)},className:"wendys-button w-full md:w-auto",size:"sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Add Daily Entry"]}),m&&e.jsxs("div",{className:"flex space-x-2 md:space-x-0 md:flex-col md:space-y-2",children:[e.jsx(R,{onClick:j,variant:"outline",size:"sm",className:"flex-1 md:flex-none border-wendys-red text-wendys-red hover:bg-wendys-red hover:text-white",children:"Sample Data"}),e.jsx(R,{onClick:u,variant:"outline",size:"sm",className:"flex-1 md:flex-none border-gray-400 text-gray-600 hover:bg-gray-100",children:"Refresh"})]})]})]}),e.jsx("div",{className:"wendys-card",children:(()=>{const t=$.reduce((k,z)=>k+(Number(z.net_sales)||0),0),l=$.length>0?$.reduce((k,z)=>k+(Number(z.labor_percentage)||0),0)/$.length:0,a=$.reduce((k,z)=>k+(Number(z.waste_amount)||0),0),_=t>0?a/t*100:0;return e.jsxs("div",{className:"grid-auto",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"MTD Net Sales"}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-bold text-wendys-charcoal",children:ne(t)})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"MTD Labor %"}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-bold text-wendys-charcoal",children:Z(l)})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"MTD Waste %"}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-bold text-wendys-charcoal",children:Z(_)})]})]})})()}),e.jsx(it,{selectedRange:y.selectedRange,selectedDate:y.selectedDate,onRangeChange:y.handleRangeChange,onDateChange:y.handleDateChange,onClearFilters:y.clearFilters}),O&&e.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:["Error loading data: ",O.message]}),e.jsxs("div",{className:"grid-auto",children:[e.jsx(xe,{title:"Comp Net Sales Trend",subtitle:"Last 30 days",loading:!W.length&&!O,error:O==null?void 0:O.message,children:te.length>0?e.jsx("div",{className:"chart-container",children:e.jsx(pe,{width:"100%",height:"100%",children:e.jsxs(Ie,{data:te,children:[e.jsx(ve,{...H.cartesianGrid}),e.jsx(we,{dataKey:"date",...H.xAxis}),e.jsx(je,{...H.yAxis,tickFormatter:t=>G.percent(t)}),e.jsx(Ee,{...H.tooltip,formatter:t=>[G.percent(t,1),"Comp Sales %"],labelFormatter:(t,l)=>{var a;return l&&l[0]&&((a=l[0].payload)==null?void 0:a.dateFull)||t}}),e.jsx(Se,{type:"monotone",dataKey:"comp_net_sales_percentage",stroke:V.sales,strokeWidth:2,dot:{fill:V.sales,strokeWidth:2,r:3},activeDot:{r:5,stroke:V.salesSecondary,strokeWidth:2},onClick:t=>{var l;return q((l=t==null?void 0:t.payload)==null?void 0:l.isoDate)}})]})})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No chart data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add some entries to see trends"})]})})}),e.jsx(xe,{title:"Waste Percentage",subtitle:"Last 30 days",loading:!W.length&&!O,error:O==null?void 0:O.message,children:f.length>0?e.jsx("div",{className:"chart-container",children:e.jsx(pe,{width:"100%",height:"100%",children:e.jsxs(Bt,{data:f,children:[e.jsx(ve,{...H.cartesianGrid}),e.jsx(we,{dataKey:"date",...H.xAxis}),e.jsx(je,{...H.yAxis,tickFormatter:t=>G.percent(t)}),e.jsx(Ee,{...H.tooltip,formatter:t=>[G.percent(t,2),"Waste %"],labelFormatter:(t,l)=>{var a;return l&&l[0]&&((a=l[0].payload)==null?void 0:a.dateFull)||t}}),e.jsx(ht,{y:.5,stroke:V.textSecondary,strokeDasharray:"4 4",label:{value:"Goal 0.5%",position:"right",fill:V.textSecondary,fontSize:12}}),e.jsx(Jt,{dataKey:"waste_percentage",fill:V.waste,opacity:.7,onClick:t=>{var l;return q((l=t==null?void 0:t.payload)==null?void 0:l.isoDate)}})]})})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No chart data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add some entries to see trends"})]})})}),e.jsx(xe,{title:"Food Variance",subtitle:"Last 30 days",loading:!W.length&&!O,error:O==null?void 0:O.message,children:f.length>0?e.jsx("div",{className:"chart-container",children:e.jsx(pe,{width:"100%",height:"100%",children:e.jsxs(Ie,{data:f,children:[e.jsx(ve,{...H.cartesianGrid}),e.jsx(we,{dataKey:"date",...H.xAxis}),e.jsx(je,{...H.yAxis,tickFormatter:t=>G.percent(t)}),e.jsx(Ee,{...H.tooltip,formatter:(t,l,a)=>{var k;const _=((k=a==null?void 0:a.payload)==null?void 0:k.food_variance_percentage)!==void 0?-a.payload.food_variance_percentage:0;return[G.percent(_,2),"Food Variance %"]},labelFormatter:(t,l)=>{var a;return l&&l[0]&&((a=l[0].payload)==null?void 0:a.dateFull)||t}}),e.jsx(ht,{y:0,stroke:V.textSecondary,strokeDasharray:"4 4",label:{value:"Target 0%",position:"right",fill:V.textSecondary,fontSize:12}}),e.jsx(Se,{type:"monotone",dataKey:"food_variance_percentage",stroke:V.foodVariance,strokeWidth:2,dot:{fill:V.foodVariance,strokeWidth:2,r:3},activeDot:{r:5,stroke:V.warning,strokeWidth:2},onClick:t=>{var l;return q((l=t==null?void 0:t.payload)==null?void 0:l.isoDate)}})]})})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"No chart data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Add some entries to see trends"})]})})})]}),e.jsxs("div",{className:"wendys-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:y.selectedRange==="last30"?"All Entries":"Filtered Entries"}),e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 flex items-center",children:[A?"Loading...":`${w.length} entries`,y.selectedRange!=="last30"&&` for ${y.getSelectedLabel()}`,(y.selectedRange!=="last30"||y.selectedDate)&&e.jsx(R,{variant:"ghost",size:"sm",onClick:y.clearFilters,className:"ml-3 text-xs text-gray-600 hover:text-gray-900",children:"Show All"})]})]}),(w==null?void 0:w.length)===0&&!A?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:m?e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium",children:"No data found"}),e.jsx("p",{className:"text-sm mt-2",children:y.selectedRange==="last30"?"You haven't added any daily entries yet.":"No entries found for the selected filter. Try changing the filter or adding a new entry."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium",children:"Store not connected"}),e.jsx("p",{className:"text-sm mt-2",children:"Please go to Setup to link your account to a store first."})]})}),m&&e.jsxs("div",{className:"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3 justify-center",children:[e.jsxs(R,{onClick:()=>n(!0),className:"wendys-button",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Add Your First Entry"]}),e.jsx(R,{onClick:j,variant:"outline",className:"border-wendys-red text-wendys-red hover:bg-wendys-red hover:text-white",children:"Generate Sample Data"})]})]}):e.jsx(rr,{columns:[{key:"business_date",label:"Date",render:t=>ue(t)},{key:"net_sales",label:"Net Sales",render:t=>ne(t)},{key:"comp_sales",label:"Comp Sales",render:(t,l)=>{const a=(l.net_sales??0)-(l.last_year_sales??0);return e.jsxs("span",{className:`flex items-center ${a>=0?"text-green-600":"text-red-600"}`,children:[a>=0?e.jsx(re,{className:"h-3 w-3 mr-1"}):e.jsx(me,{className:"h-3 w-3 mr-1"}),ne(Math.abs(a))]})}},{key:"labor_hours",label:"Labor Hours",render:t=>`${t}h`},{key:"labor_percentage",label:"Labor %",render:t=>Z(t)},{key:"food_variance",label:"Food Variance",render:(t,l)=>{const a=l.net_sales?l.food_variance_cost/l.net_sales*100:0;return Z(a)}},{key:"waste",label:"Waste",render:(t,l)=>{const a=l.net_sales?l.waste_amount/l.net_sales*100:0;return Z(a)}},{key:"actions",label:"Actions",render:(t,l)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>I(l),className:"h-8 w-8 p-0",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{q(l.business_date),i({title:"Details",description:"Detailed view coming soon."})},className:"h-8 w-8 p-0",title:"View details",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Q(l.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(Re,{className:"h-4 w-4"})})]})}],data:w,mobileCardRender:t=>{const l=(t.net_sales??0)-(t.last_year_sales??0),a=t.net_sales?t.food_variance_cost/t.net_sales*100:0,_=t.net_sales?t.waste_amount/t.net_sales*100:0;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-900",children:ue(t.business_date)}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>I(t),className:"h-8 w-8 p-0",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Q(t.id),className:"h-8 w-8 p-0 text-red-600",children:e.jsx(Re,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Net Sales:"}),e.jsx("div",{className:"font-medium",children:ne(t.net_sales)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Comp Sales:"}),e.jsxs("div",{className:`font-medium flex items-center ${l>=0?"text-green-600":"text-red-600"}`,children:[l>=0?e.jsx(re,{className:"h-3 w-3 mr-1"}):e.jsx(me,{className:"h-3 w-3 mr-1"}),ne(Math.abs(l))]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Labor:"}),e.jsxs("div",{className:"font-medium",children:[t.labor_hours,"h (",Z(t.labor_percentage),")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Food Variance:"}),e.jsx("div",{className:"font-medium",children:Z(a)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Waste:"}),e.jsx("div",{className:"font-medium",children:Z(_)})]})]})]})},emptyMessage:"No entries found",loading:A})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-wendys-charcoal",children:r?"Edit Daily Entry":"Add Daily Entry"}),e.jsx(R,{variant:"ghost",onClick:()=>{n(!1),d(null),o.reset()},className:"h-8 w-8 p-0",children:"×"})]}),e.jsxs("form",{onSubmit:o.handleSubmit(v,D),className:"space-y-4",children:[Object.keys(o.formState.errors).length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Please fix the following errors:"}),e.jsx("ul",{className:"text-sm text-red-700 mt-1 space-y-1",children:Object.entries(o.formState.errors).map(([t,l])=>e.jsxs("li",{children:["• ",l==null?void 0:l.message]},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(S,{children:"Business Date"}),e.jsxs(Ke,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),o.watch("business_date")?ue(o.watch("business_date")):"Pick a date"]})}),e.jsx(Fe,{className:"w-auto p-0",children:e.jsx(ke,{mode:"single",selected:(()=>{const t=o.watch("business_date");if(!t)return;const l=Number(t.slice(0,4)),a=Number(t.slice(5,7)),_=Number(t.slice(8,10));return new Date(l,(a||1)-1,_||1)})(),onSelect:t=>{const l=t?L(t,"yyyy-MM-dd"):"";if(o.setValue("business_date",l),l){const a=w.find(_=>_.business_date===l);a?(d(a),o.reset({business_date:a.business_date,net_sales:a.net_sales!=null?Number(a.net_sales):0,last_year_sales:a.last_year_sales!=null?Number(a.last_year_sales):0,labor_hours:a.labor_hours!=null?Number(a.labor_hours):0,ideal_labor_hours:a.ideal_labor_hours!=null?Number(a.ideal_labor_hours):0,labor_percentage:a.labor_percentage!=null?Number(a.labor_percentage):0,theoretical_food_cost:a.theoretical_food_cost!=null?Number(a.theoretical_food_cost):0,food_variance_cost:a.food_variance_cost!=null?Number(a.food_variance_cost):0,waste_amount:a.waste_amount!=null?Number(a.waste_amount):0,breakfast_sales:a.breakfast_sales!=null?Number(a.breakfast_sales):0,night_sales:a.night_sales!=null?Number(a.night_sales):0}),i({title:"Loaded existing entry",description:`Loaded data for ${ue(a.business_date)} to edit.`})):(d(null),o.reset({business_date:l,net_sales:0,last_year_sales:0,labor_hours:0,ideal_labor_hours:0,labor_percentage:0,theoretical_food_cost:0,food_variance_cost:0,waste_amount:0,breakfast_sales:0,night_sales:0}))}},initialFocus:!0})})]}),o.formState.errors.business_date&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.business_date.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"net_sales",children:"Net Sales ($)"}),e.jsx(C,{id:"net_sales",type:"number",step:"0.01",...o.register("net_sales")}),o.formState.errors.net_sales&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.net_sales.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"last_year_sales",children:"Last Year Sales ($)"}),e.jsx(C,{id:"last_year_sales",type:"number",step:"0.01",...o.register("last_year_sales")}),o.formState.errors.last_year_sales&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.last_year_sales.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"comp_net_sales",children:"Comp Net Sales (%)"}),e.jsx(C,{id:"comp_net_sales",value:Z(J),disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"labor_hours",children:"Labor Hours"}),e.jsx(C,{id:"labor_hours",type:"number",step:"0.1",...o.register("labor_hours")}),o.formState.errors.labor_hours&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.labor_hours.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"ideal_labor_hours",children:"Ideal Labor Hours"}),e.jsx(C,{id:"ideal_labor_hours",type:"number",step:"0.1",...o.register("ideal_labor_hours")}),o.formState.errors.ideal_labor_hours&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.ideal_labor_hours.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"labor_hours_diff",children:"Labor Hours +/-"}),e.jsx(C,{id:"labor_hours_diff",value:`${(M??0)>=0?"+":""}${(M??0).toFixed(1)}h`,disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"labor_percentage",children:"Labor Percentage (%)"}),e.jsx(C,{id:"labor_percentage",type:"number",step:"0.1",...o.register("labor_percentage")}),o.formState.errors.labor_percentage&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.labor_percentage.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"theoretical_food_cost",children:"Theoretical Food Cost ($)"}),e.jsx(C,{id:"theoretical_food_cost",type:"number",step:"0.01",...o.register("theoretical_food_cost")}),o.formState.errors.theoretical_food_cost&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.theoretical_food_cost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"food_variance_cost",children:"Food Variance Cost ($)"}),e.jsx(C,{id:"food_variance_cost",type:"number",step:"0.01",...o.register("food_variance_cost")}),o.formState.errors.food_variance_cost&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.food_variance_cost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"food_variance_percentage",children:"Food Variance %"}),e.jsx(C,{id:"food_variance_percentage",value:Z(Ue),disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"waste_amount",children:"Waste Amount ($)"}),e.jsx(C,{id:"waste_amount",type:"number",step:"0.01",...o.register("waste_amount")}),o.formState.errors.waste_amount&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.waste_amount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"waste_percentage",children:"Waste %"}),e.jsx(C,{id:"waste_percentage",value:Z(fe),disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"breakfast_sales",children:"Breakfast Sales ($)"}),e.jsx(C,{id:"breakfast_sales",type:"number",step:"0.01",...o.register("breakfast_sales")}),o.formState.errors.breakfast_sales&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.breakfast_sales.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"night_sales",children:"Night Sales ($)"}),e.jsx(C,{id:"night_sales",type:"number",step:"0.01",...o.register("night_sales")}),o.formState.errors.night_sales&&e.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.night_sales.message})]})]}),!m&&e.jsx("div",{className:"text-sm text-red-600",children:"Your account isn’t linked to a store yet. Open Setup and link your user to a store, then try again."}),e.jsxs("div",{className:"flex flex-col-reverse space-y-2 space-y-reverse md:flex-row md:space-y-0 md:space-x-3 pt-4 md:col-span-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>{n(!1),d(null),o.reset()},className:"w-full md:w-auto",children:"Cancel"}),e.jsx(R,{type:"submit",className:"wendys-button w-full md:w-auto",disabled:c.isPending||x.isPending||!m,children:r?"Update Entry":"Save Entry"})]})]})]})})]})}const lr=ce("/weekending-sheet")({component:dr});function dr(){const[s,n]=b.useState(!1),[r,d]=b.useState(null),[i,p]=b.useState(!1),{toast:m}=oe(),g=Ce(),[y,j]=b.useState(null),u=()=>{const I=Ks(new Date,{weekStartsOn:6});return L(Ys(I,{weekStartsOn:6}),"yyyy-MM-dd")},o=()=>({week_ending_date:u(),manager_name:"Scott",breakfast_sales:0,late_night_sales:0,net_sales:0,discounts:0,cash:0,food_total:0,food_cost:0,variance_dollars:0,food_variance_percentage:0,labor:0,credit_hours:0,reason:"",onboarding:!1,crew_food_safety_quiz:0,mgr_food_safety_quiz:0,new_hire_name:"",terminations:"",term_date:""}),c=f=>f==="Scott"||f==="Sophear"||f==="Letoya"||f==="Carissa"?f:"Scott",x=Me({resolver:Oe(qa),defaultValues:o()}),v=ee({mutationFn:async f=>{if(!y)throw new Error("No store is linked to your account. See Setup to link one.");const I={store_id:y,...f};console.log("Attempting to insert data:",I),console.log("Store ID:",y),console.log("Payload:",f);const{data:Q,error:F}=await E.from("weekending_sheet").insert(I).select();if(F)throw console.error("Supabase insert error:",F),console.error("Error details:",F.details),console.error("Error hint:",F.hint),console.error("Error message:",F.message),F;return Q},onSuccess:()=>{m({title:"Success!",description:"Weekending sheet saved successfully."}),n(!1),d(null),x.reset(o()),g.invalidateQueries({queryKey:["weekending_sheet",y]})},onError:f=>{m({title:"Save failed",description:(f==null?void 0:f.message)||"Unable to save entry.",variant:"destructive"})}}),D=ee({mutationFn:async({id:f,payload:I})=>{if(!y)throw new Error("No store is linked to your account. See Setup to link one.");const{error:Q}=await E.from("weekending_sheet").update({...I}).eq("id",f);if(Q)throw Q},onSuccess:()=>{m({title:"Updated!",description:"Weekending sheet updated successfully."}),n(!1),d(null),x.reset(),g.invalidateQueries({queryKey:["weekending_sheet",y]})},onError:f=>{m({title:"Update failed",description:(f==null?void 0:f.message)||"Unable to update entry.",variant:"destructive"})}}),N=ee({mutationFn:async f=>{const{error:I}=await E.from("weekending_sheet").delete().eq("id",f);if(I)throw I},onSuccess:()=>{m({title:"Deleted",description:"Weekending sheet entry removed."}),g.invalidateQueries({queryKey:["weekending_sheet",y]})},onError:f=>{m({title:"Delete failed",description:(f==null?void 0:f.message)||"Unable to delete entry.",variant:"destructive"})}}),h=f=>{const I={...f,breakfast_sales:Number(f.breakfast_sales)||0,late_night_sales:Number(f.late_night_sales)||0,net_sales:Number(f.net_sales)||0,discounts:Number(f.discounts)||0,cash:Number(f.cash)||0,food_total:Number(f.food_total)||0,food_cost:Number(f.food_cost)||0,variance_dollars:Number(f.variance_dollars)||0,food_variance_percentage:Number(f.food_variance_percentage)||0,labor:Number(f.labor)||0,credit_hours:Number(f.credit_hours)||0,crew_food_safety_quiz:Number(f.crew_food_safety_quiz)||0,mgr_food_safety_quiz:Number(f.mgr_food_safety_quiz)||0,term_date:f.term_date&&f.term_date.trim()!==""?f.term_date:null};r?D.mutate({id:r.id,payload:I}):v.mutate(I)},w=f=>{console.error("Form validation failed:",f),f.discounts&&console.error("Discounts error:",f.discounts),f.cash&&console.error("Cash error:",f.cash),f.food_cost&&console.error("Food cost error:",f.food_cost),m({title:"Validation Error",description:"Please check the form for errors and try again.",variant:"destructive"})};b.useEffect(()=>{let f=!0;return(async()=>{var Q;try{const{data:F}=await E.auth.getUser(),J=(Q=F.user)==null?void 0:Q.id;if(!J||!f)return;console.log("Resolving store_id for user:",J);const{data:M}=await E.from("users").select("store_id").eq("id",J).maybeSingle();console.log("User data from database:",M),console.log("Store ID resolved:",M==null?void 0:M.store_id),f&&j((M==null?void 0:M.store_id)??null)}catch(F){console.error("Error resolving store ID:",F),f&&j(null)}})(),()=>{f=!1}},[]);const{data:A=[],isLoading:O,error:W}=B({queryKey:["weekending_sheet",y],queryFn:async()=>{if(!y)return[];const{data:f,error:I}=await E.from("weekending_sheet").select("*").eq("store_id",y).order("week_ending_date",{ascending:!1}).limit(100);if(I)throw I;return f},enabled:!!y}),$=f=>{d(f),x.reset({week_ending_date:f.week_ending_date,manager_name:c(f.manager_name),breakfast_sales:f.breakfast_sales||0,late_night_sales:f.late_night_sales||0,net_sales:f.net_sales||0,discounts:f.discounts||0,cash:f.cash||0,food_total:f.food_total||0,food_cost:f.food_cost||0,variance_dollars:f.variance_dollars||0,food_variance_percentage:f.food_variance_percentage||0,labor:f.labor||0,credit_hours:f.credit_hours||0,reason:f.reason||"",onboarding:f.onboarding||!1,crew_food_safety_quiz:f.crew_food_safety_quiz||0,mgr_food_safety_quiz:f.mgr_food_safety_quiz||0,new_hire_name:f.new_hire_name||"",terminations:f.terminations||"",term_date:f.term_date||""}),n(!0)},q=f=>{confirm("Are you sure you want to delete this entry?")&&N.mutate(f)},te=()=>{if(A.length===0){m({title:"No data",description:"No entries to export.",variant:"destructive"});return}const I=[["Week Ending Date","Manager","Breakfast Sales","Late Night Sales","Net Sales","Discounts","Cash","Food Total","Food Cost","Variance Dollars","Food Variance %","Labor","Credit Hours","Reason","Onboarding","Crew Food Safety Quiz","MGR Food Safety Quiz","New Hire Name","Terminations","Term Date"].join(","),...A.map(M=>[M.week_ending_date,M.manager_name,M.breakfast_sales,M.late_night_sales,M.net_sales,M.discounts,M.cash,M.food_total,M.food_cost,M.variance_dollars,M.food_variance_percentage,M.labor,M.credit_hours,M.reason||"",M.onboarding?"Yes":"No",M.crew_food_safety_quiz,M.mgr_food_safety_quiz,M.new_hire_name||"",M.terminations||"",M.term_date||""].join(","))].join(`
`),Q=new Blob([I],{type:"text/csv"}),F=window.URL.createObjectURL(Q),J=document.createElement("a");J.href=F,J.download=`weekending-sheet-${L(new Date,"yyyy-MM-dd")}.csv`,J.click(),window.URL.revokeObjectURL(F),m({title:"Exported!",description:"CSV file downloaded successfully."})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-wendys-charcoal",children:"Weekending Sheet"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Weekly operational data and metrics tracking"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-2 md:items-center",children:[e.jsxs(R,{onClick:()=>{d(null),x.reset(o()),n(!0)},className:"wendys-button w-full md:w-auto",size:"sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Add Weekending Entry"]}),A.length>0&&e.jsxs(R,{onClick:te,variant:"outline",size:"sm",className:"w-full md:w-auto border-wendys-red text-wendys-red hover:bg-wendys-red hover:text-white",children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),e.jsx("div",{className:"wendys-card",children:e.jsxs("div",{className:"grid-auto",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Entries"}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-bold text-wendys-charcoal",children:A.length})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Latest Week"}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-bold text-wendys-charcoal",children:A.length>0?ue(A[0].week_ending_date):"N/A"})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Avg Net Sales"}),e.jsx("p",{className:"mt-1 text-2xl sm:text-3xl font-bold text-wendys-charcoal",children:A.length>0?ne(A.reduce((f,I)=>f+(I.net_sales||0),0)/A.length):"$0"})]})]})}),W&&e.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:["Error loading data: ",W.message]}),e.jsxs("div",{className:"wendys-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal",children:"Weekending Entries"}),e.jsx("div",{className:"text-xs md:text-sm text-gray-600",children:O?"Loading...":`${A.length} entries`})]}),(A==null?void 0:A.length)===0&&!O?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:y?e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium",children:"No data found"}),e.jsx("p",{className:"text-sm mt-2",children:"You haven't added any weekending entries yet."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium",children:"Store not connected"}),e.jsx("p",{className:"text-sm mt-2",children:"Please go to Setup to link your account to a store first."})]})}),y&&e.jsxs(R,{onClick:()=>n(!0),className:"wendys-button",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Add Your First Entry"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Week Ending"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Sales"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Food Variance"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Labor"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:ue(f.week_ending_date)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:f.manager_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:ne(f.net_sales)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:Z(f.food_variance_percentage)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:ne(f.labor)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>$(f),className:"h-8 w-8 p-0",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>q(f.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(Re,{className:"h-4 w-4"})})]})})]},f.id))})]})})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-wendys-charcoal",children:r?"Edit Weekending Entry":"Add Weekending Entry"}),e.jsx(R,{variant:"ghost",onClick:()=>{n(!1),d(null),x.reset()},className:"h-8 w-8 p-0",children:"×"})]}),e.jsxs("form",{onSubmit:x.handleSubmit(h,w),className:"space-y-6",children:[Object.keys(x.formState.errors).length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Please fix the following errors:"}),e.jsx("ul",{className:"text-sm text-red-700 mt-1 space-y-1",children:Object.entries(x.formState.errors).map(([f,I])=>e.jsxs("li",{children:["• ",I==null?void 0:I.message]},f))})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h3",{className:"form-section-title",children:[e.jsx(at,{className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(S,{children:"Week Ending Date"}),e.jsxs(Ke,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),x.watch("week_ending_date")?ue(x.watch("week_ending_date")):"Pick a date"]})}),e.jsx(Fe,{className:"w-auto p-0",children:e.jsx(ke,{mode:"single",selected:(()=>{const f=x.watch("week_ending_date");if(!f)return;const I=Number(f.slice(0,4)),Q=Number(f.slice(5,7)),F=Number(f.slice(8,10));return new Date(I,(Q||1)-1,F||1)})(),onSelect:f=>{const I=f?L(f,"yyyy-MM-dd"):"";x.setValue("week_ending_date",I)},initialFocus:!0})})]}),x.formState.errors.week_ending_date&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.week_ending_date.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"manager_name",children:"Manager Name"}),e.jsxs("select",{id:"manager_name",...x.register("manager_name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-wendys-red/20 focus:border-wendys-red",children:[e.jsx("option",{value:"Scott",children:"Scott"}),e.jsx("option",{value:"Sophear",children:"Sophear"}),e.jsx("option",{value:"Letoya",children:"Letoya"}),e.jsx("option",{value:"Carissa",children:"Carissa"})]}),x.formState.errors.manager_name&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.manager_name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"reason",children:"Reason"}),e.jsx(C,{id:"reason",placeholder:"Optional notes or reason",...x.register("reason")}),x.formState.errors.reason&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.reason.message})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("h3",{className:"form-section-title",children:[e.jsx(Qs,{className:"mr-2"}),"Sales & Financial Data"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"breakfast_sales",children:"Breakfast Sales (DP1) ($)"}),e.jsx(C,{id:"breakfast_sales",type:"number",step:"0.01",placeholder:"0.00",...x.register("breakfast_sales")}),x.formState.errors.breakfast_sales&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.breakfast_sales.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"late_night_sales",children:"Late Night Sales (DP6) ($)"}),e.jsx(C,{id:"late_night_sales",type:"number",step:"0.01",placeholder:"0.00",...x.register("late_night_sales")}),x.formState.errors.late_night_sales&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.late_night_sales.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"net_sales",children:"Net Sales ($)"}),e.jsx(C,{id:"net_sales",type:"number",step:"0.01",placeholder:"0.00",...x.register("net_sales")}),x.formState.errors.net_sales&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.net_sales.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"discounts",children:"Discounts ($) - Can be negative"}),e.jsx(C,{id:"discounts",type:"number",step:"0.01",placeholder:"0.00",...x.register("discounts")}),x.formState.errors.discounts&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.discounts.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"cash",children:"Cash ($) - Can be negative"}),e.jsx(C,{id:"cash",type:"number",step:"0.01",placeholder:"0.00",...x.register("cash")}),x.formState.errors.cash&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.cash.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"food_total",children:"Food Total ($) - Can be negative"}),e.jsx(C,{id:"food_total",type:"number",step:"0.01",placeholder:"0.00",...x.register("food_total")}),x.formState.errors.food_total&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.food_total.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"food_cost",children:"Food Cost ($) - Can be negative"}),e.jsx(C,{id:"food_cost",type:"number",step:"0.01",placeholder:"0.00",...x.register("food_cost")}),x.formState.errors.food_cost&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.food_cost.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"variance_dollars",children:"Variance Dollars ($) - Can be negative"}),e.jsx(C,{id:"variance_dollars",type:"number",step:"0.01",placeholder:"0.00",...x.register("variance_dollars")}),x.formState.errors.variance_dollars&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.variance_dollars.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"food_variance_percentage",children:"Food Variance % - Can be negative"}),e.jsx(C,{id:"food_variance_percentage",type:"number",step:"0.1",placeholder:"0.0",...x.register("food_variance_percentage")}),x.formState.errors.food_variance_percentage&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.food_variance_percentage.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"labor",children:"Labor ($)"}),e.jsx(C,{id:"labor",type:"number",step:"0.01",placeholder:"0.00",...x.register("labor")}),x.formState.errors.labor&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.labor.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"credit_hours",children:"Credit Hours"}),e.jsx(C,{id:"credit_hours",type:"number",step:"0.1",placeholder:"0.0",...x.register("credit_hours")}),x.formState.errors.credit_hours&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.credit_hours.message})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("button",{type:"button",onClick:()=>p(!i),className:"form-section-title w-full text-left flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dt,{className:"mr-2"}),"WeLearn & Training"]}),i?e.jsx(rt,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})]}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx("div",{className:"md:col-span-2 space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"onboarding",type:"checkbox",...x.register("onboarding"),className:"h-4 w-4 text-wendys-red focus:ring-wendys-red border-gray-300 rounded"}),e.jsx(S,{htmlFor:"onboarding",children:"Onboarding Completed"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"crew_food_safety_quiz",children:"Crew Food Safety Quiz Score"}),e.jsx(C,{id:"crew_food_safety_quiz",type:"number",step:"0.1",min:"0",max:"100",placeholder:"0-100",...x.register("crew_food_safety_quiz")}),x.formState.errors.crew_food_safety_quiz&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.crew_food_safety_quiz.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"mgr_food_safety_quiz",children:"MGR Food Safety Quiz Score"}),e.jsx(C,{id:"mgr_food_safety_quiz",type:"number",step:"0.1",min:"0",max:"100",placeholder:"0-100",...x.register("mgr_food_safety_quiz")}),x.formState.errors.mgr_food_safety_quiz&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.mgr_food_safety_quiz.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"new_hire_name",children:"New Hire Name"}),e.jsx(C,{id:"new_hire_name",placeholder:"Optional",...x.register("new_hire_name")}),x.formState.errors.new_hire_name&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.new_hire_name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"terminations",children:"Terminations"}),e.jsx(C,{id:"terminations",placeholder:"Optional",...x.register("terminations")}),x.formState.errors.terminations&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.terminations.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"term_date",children:"Termination Date"}),e.jsx(C,{id:"term_date",type:"date",...x.register("term_date")}),x.formState.errors.term_date&&e.jsx("p",{className:"text-sm text-red-600",children:x.formState.errors.term_date.message})]})]})]}),!y&&e.jsx("div",{className:"text-sm text-red-600",children:"Your account isn't linked to a store yet. Open Setup and link your user to a store, then try again."}),e.jsxs("div",{className:"flex flex-col-reverse space-y-2 space-y-reverse md:flex-row md:space-y-0 md:space-x-3 pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>{n(!1),d(null),x.reset()},className:"w-full md:w-auto",children:"Cancel"}),e.jsx(R,{type:"submit",className:"wendys-button w-full md:w-auto",disabled:v.isPending||D.isPending||!y,children:r?"Update Entry":"Save Entry"})]})]})]})})]})}const Ge=b.forwardRef(({className:s,...n},r)=>e.jsx("textarea",{className:T("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...n}));Ge.displayName="Textarea";const cr=ce("/calendar")({component:mr});function mr(){var fe,t,l;const[s,n]=b.useState(!1),[r,d]=b.useState(!1),[i,p]=b.useState(null),[m,g]=b.useState(null),[y,j]=b.useState(new Date),[u,o]=b.useState("month"),{toast:c}=oe(),x=Ce(),[v,D]=b.useState(null);b.useEffect(()=>{(async()=>{const{data:{user:_}}=await E.auth.getUser();D((_==null?void 0:_.id)||null)})()},[]);const{data:N=[]}=B({queryKey:["calendar-events",v],queryFn:async()=>{if(!v)return[];const{data:a,error:_}=await E.from("calendar_events").select("*").eq("created_by",v).order("start_date",{ascending:!0});if(_)throw _;return a||[]},enabled:!!v}),{data:h=[]}=B({queryKey:["calendar-reminders",v],queryFn:async()=>{if(!v)return[];const{data:a,error:_}=await E.from("calendar_reminders").select("*").eq("created_by",v).order("due_date",{ascending:!0});if(_)throw _;return a||[]},enabled:!!v}),w=ee({mutationFn:async a=>{if(!v)throw new Error("User not authenticated");if(i){const{error:_}=await E.from("calendar_events").update({...a,updated_at:new Date().toISOString()}).eq("id",i.id);if(_)throw _}else{const{error:_}=await E.from("calendar_events").insert({...a,created_by:v,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(_)throw _}},onSuccess:()=>{c({title:i?"Event updated!":"Event created!",description:i?"Your event has been updated successfully.":"Your event has been created successfully."}),n(!1),p(null),x.invalidateQueries({queryKey:["calendar-events",v]})},onError:a=>{c({title:"Error",description:a.message||"Failed to save event",variant:"destructive"})}}),A=ee({mutationFn:async a=>{if(!v)throw new Error("User not authenticated");if(m){const{error:_}=await E.from("calendar_reminders").update({...a,updated_at:new Date().toISOString()}).eq("id",m.id);if(_)throw _}else{const{error:_}=await E.from("calendar_reminders").insert({...a,created_by:v,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(_)throw _}},onSuccess:()=>{c({title:m?"Reminder updated!":"Reminder created!",description:m?"Your reminder has been updated successfully.":"Your reminder has been created successfully."}),d(!1),g(null),x.invalidateQueries({queryKey:["calendar-reminders",v]})},onError:a=>{c({title:"Error",description:a.message||"Failed to save reminder",variant:"destructive"})}}),O=ee({mutationFn:async a=>{const{error:_}=await E.from("calendar_events").delete().eq("id",a);if(_)throw _},onSuccess:()=>{c({title:"Event deleted",description:"Event has been removed successfully."}),x.invalidateQueries({queryKey:["calendar-events",v]})},onError:a=>{c({title:"Delete failed",description:a.message,variant:"destructive"})}}),W=ee({mutationFn:async a=>{const{error:_}=await E.from("calendar_reminders").delete().eq("id",a);if(_)throw _},onSuccess:()=>{c({title:"Reminder deleted",description:"Reminder has been removed successfully."}),x.invalidateQueries({queryKey:["calendar-reminders",v]})},onError:a=>{c({title:"Delete failed",description:a.message,variant:"destructive"})}}),$=ee({mutationFn:async({id:a,completed:_})=>{const{error:k}=await E.from("calendar_reminders").update({completed:_,updated_at:new Date().toISOString()}).eq("id",a);if(k)throw k},onSuccess:()=>{x.invalidateQueries({queryKey:["calendar-reminders",v]})},onError:a=>{c({title:"Error",description:a.message,variant:"destructive"})}}),q=N.filter(a=>De(Ne(a.start_date),y)),te=h.filter(a=>De(Ne(a.due_date),y)),f=Bs({start:Js(y),end:Xs(y)}),I=a=>N.filter(_=>De(Ne(_.start_date),a)),Q=a=>h.filter(_=>De(Ne(_.due_date),a)),F=a=>{a&&j(a)},J=a=>{p(a||null),n(!0)},M=a=>{g(a||null),d(!0)},Ue=a=>{switch(a){case"high":return e.jsx(he,{className:"h-3 w-3 fill-red-500 text-red-500"});case"medium":return e.jsx(he,{className:"h-3 w-3 fill-yellow-500 text-yellow-500"});case"low":return e.jsx(he,{className:"h-3 w-3 fill-green-500 text-green-500"});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-wendys-red via-red-600 to-wendys-dark-red opacity-10"}),e.jsx("div",{className:"relative px-6 py-8 sm:px-8 lg:px-12",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-wendys-charcoal to-gray-700 bg-clip-text text-transparent",children:"Calendar"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl",children:"Organize your schedule with beautiful events and smart reminders"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(R,{onClick:()=>J(),className:"wendys-button shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"Add Event"]}),e.jsxs(R,{onClick:()=>M(),variant:"outline",className:"border-2 border-wendys-red text-wendys-red hover:bg-wendys-red hover:text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(gt,{className:"h-5 w-5 mr-2"}),"Add Reminder"]})]})]})})})]}),e.jsx("div",{className:"px-6 sm:px-8 lg:px-12 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"inline-flex bg-white rounded-xl p-1 shadow-lg border border-gray-200",children:["month","week","day"].map(a=>e.jsx(R,{variant:u===a?"default":"ghost",onClick:()=>o(a),size:"sm",className:`rounded-lg px-6 py-2 font-medium transition-all duration-200 ${u===a?"wendys-button shadow-md":"text-gray-600 hover:text-wendys-charcoal hover:bg-gray-100"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-8",children:e.jsx(ke,{mode:"single",selected:y,onSelect:F,className:"rounded-xl border-0",classNames:{day_selected:"bg-wendys-red text-white hover:bg-wendys-dark-red focus:bg-wendys-dark-red",day_today:"bg-wendys-red/10 text-wendys-red font-bold",day:"h-12 w-12 text-center text-sm p-0 font-normal aria-selected:opacity-100 hover:bg-gray-100 rounded-lg transition-colors duration-200",head_cell:"text-gray-500 font-semibold text-sm uppercase tracking-wide pb-4",nav_button:"text-gray-600 hover:text-wendys-charcoal hover:bg-gray-100 rounded-lg transition-colors duration-200",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",caption:"relative px-8 py-4 text-center text-xl font-semibold text-wendys-charcoal",caption_label:"text-xl font-semibold text-wendys-charcoal",table:"w-full border-collapse space-y-1",head_row:"flex",row:"flex w-full mt-2",cell:"h-12 w-12 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20"}})})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-wendys-red to-wendys-dark-red rounded-full mb-4",children:e.jsx(ie,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-wendys-charcoal",children:L(y,"EEEE")}),e.jsx("p",{className:"text-lg text-gray-600",children:L(y,"MMMM d, yyyy")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center text-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),"Events (",q.length,")"]}),q.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ie,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No events scheduled"})]}):e.jsx("div",{className:"space-y-3",children:q.map(a=>e.jsx("div",{className:"group bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-4 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-blue-900 text-lg",children:a.title}),a.description&&e.jsx("p",{className:"text-sm text-blue-700 mt-2 leading-relaxed",children:a.description}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600 mt-3 space-x-4",children:[e.jsxs("span",{className:"flex items-center bg-blue-200 px-2 py-1 rounded-full",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),L(Ne(a.start_date),"h:mm a")]}),a.location&&e.jsxs("span",{className:"flex items-center bg-blue-200 px-2 py-1 rounded-full",children:[e.jsx(nt,{className:"h-3 w-3 mr-1"}),a.location]})]})]}),e.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>J(a),className:"h-8 w-8 p-0 hover:bg-blue-200",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>O.mutate(a.id),className:"h-8 w-8 p-0 text-red-600 hover:bg-red-100",children:e.jsx(Re,{className:"h-4 w-4"})})]})]})},a.id))})]}),e.jsxs("div",{className:"space-y-4 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center text-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-3"}),"Reminders (",te.length,")"]}),te.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gt,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No reminders due"})]}):e.jsx("div",{className:"space-y-3",children:te.map(a=>e.jsx("div",{className:`group border rounded-xl p-4 transition-all duration-200 hover:shadow-md ${a.completed?"bg-gray-50 border-gray-200":a.priority==="high"?"bg-gradient-to-r from-red-50 to-red-100 border-red-200":a.priority==="medium"?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-200":"bg-gradient-to-r from-green-50 to-green-100 border-green-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>$.mutate({id:a.id,completed:!a.completed}),className:"flex-shrink-0",children:a.completed?e.jsx(Pe,{className:"h-5 w-5 text-green-600"}):e.jsx(qt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors duration-200"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[Ue(a.priority),e.jsx("h5",{className:`font-semibold text-lg ${a.completed?"text-gray-500 line-through":"text-gray-900"}`,children:a.title})]})]}),a.description&&e.jsx("p",{className:`text-sm mt-2 leading-relaxed ${a.completed?"text-gray-500":"text-gray-700"}`,children:a.description}),e.jsx("div",{className:"flex items-center mt-3",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a.priority==="high"?"bg-red-100 text-red-800":a.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[a.priority.charAt(0).toUpperCase()+a.priority.slice(1)," Priority"]})})]}),e.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>M(a),className:"h-8 w-8 p-0 hover:bg-gray-200",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>W.mutate(a.id),className:"h-8 w-8 p-0 text-red-600 hover:bg-red-100",children:e.jsx(Re,{className:"h-4 w-4"})})]})]})},a.id))})]})]})})]}),u==="month"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-wendys-charcoal mb-6 text-center",children:L(y,"MMMM yyyy")}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-500 py-3 px-2",children:a},a)),f.map((a,_)=>{const k=I(a),z=Q(a),se=Zs(a),X=De(a,y),de=ea(a,y);return e.jsxs("div",{className:`min-h-[100px] p-2 border border-gray-200 cursor-pointer transition-all duration-200 rounded-lg ${de?"bg-white hover:bg-gray-50":"bg-gray-50 text-gray-400"} ${se?"bg-gradient-to-br from-wendys-red/20 to-wendys-dark-red/20 border-wendys-red/30 shadow-md":""} ${X?"bg-blue-50 border-blue-300 shadow-md":""}`,onClick:()=>j(a),children:[e.jsx("div",{className:`text-sm font-semibold mb-2 ${se?"text-wendys-red":de?"text-gray-900":"text-gray-400"}`,children:L(a,"d")}),k.slice(0,2).map(K=>e.jsx("div",{className:"text-xs bg-gradient-to-r from-blue-500 to-blue-600 text-white px-2 py-1 rounded-full mb-1 truncate shadow-sm",title:K.title,children:K.title},K.id)),z.slice(0,2).map(K=>e.jsx("div",{className:`text-xs px-2 py-1 rounded-full mb-1 truncate shadow-sm ${K.completed?"bg-gray-400 text-white":K.priority==="high"?"bg-gradient-to-r from-red-500 to-red-600 text-white":K.priority==="medium"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white":"bg-gradient-to-r from-green-500 to-green-600 text-white"}`,title:K.title,children:K.title},K.id)),k.length+z.length>4&&e.jsxs("div",{className:"text-xs text-gray-500 text-center bg-gray-100 rounded-full py-1 mt-1",children:["+",k.length+z.length-4," more"]})]},_)})]})]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-wendys-charcoal",children:i?"Edit Event":"Add Event"}),e.jsx(R,{variant:"ghost",onClick:()=>{n(!1),p(null)},className:"h-10 w-10 p-0 rounded-full hover:bg-gray-100",children:"×"})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault();const _=new FormData(a.currentTarget),k={title:_.get("title"),description:_.get("description"),start_date:_.get("start_date"),end_date:_.get("end_date")||void 0,all_day:_.get("all_day")==="on",location:_.get("location"),reminder_type:_.get("reminder_type")};w.mutate(k)},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"title",className:"text-sm font-semibold text-gray-700",children:"Event Title *"}),e.jsx(C,{id:"title",name:"title",defaultValue:i==null?void 0:i.title,required:!0,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg",placeholder:"Enter event title"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"description",className:"text-sm font-semibold text-gray-700",children:"Description"}),e.jsx(Ge,{id:"description",name:"description",defaultValue:i==null?void 0:i.description,rows:3,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg",placeholder:"Enter event description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"start_date",className:"text-sm font-semibold text-gray-700",children:"Start Date *"}),e.jsx(C,{id:"start_date",name:"start_date",type:"datetime-local",defaultValue:(fe=i==null?void 0:i.start_date)==null?void 0:fe.slice(0,16),required:!0,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"end_date",className:"text-sm font-semibold text-gray-700",children:"End Date"}),e.jsx(C,{id:"end_date",name:"end_date",type:"datetime-local",defaultValue:(t=i==null?void 0:i.end_date)==null?void 0:t.slice(0,16),className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"all_day",name:"all_day",type:"checkbox",defaultChecked:i==null?void 0:i.all_day,className:"rounded border-gray-300 text-wendys-red focus:ring-wendys-red/20 h-4 w-4"}),e.jsx(S,{htmlFor:"all_day",className:"text-sm font-medium text-gray-700",children:"All day event"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"location",className:"text-sm font-semibold text-gray-700",children:"Location"}),e.jsx(C,{id:"location",name:"location",defaultValue:i==null?void 0:i.location,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg",placeholder:"Enter location"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"reminder_type",className:"text-sm font-semibold text-gray-700",children:"Reminder"}),e.jsxs("select",{id:"reminder_type",name:"reminder_type",defaultValue:(i==null?void 0:i.reminder_type)||"none",className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-wendys-red focus:ring-wendys-red/20",children:[e.jsx("option",{value:"none",children:"No reminder"}),e.jsx("option",{value:"15min",children:"15 minutes before"}),e.jsx("option",{value:"1hour",children:"1 hour before"}),e.jsx("option",{value:"1day",children:"1 day before"}),e.jsx("option",{value:"1week",children:"1 week before"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>{n(!1),p(null)},className:"border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg",children:"Cancel"}),e.jsx(R,{type:"submit",className:"wendys-button rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:i?"Update Event":"Create Event"})]})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-wendys-charcoal",children:m?"Edit Reminder":"Add Reminder"}),e.jsx(R,{variant:"ghost",onClick:()=>{d(!1),g(null)},className:"h-10 w-10 p-0 rounded-full hover:bg-gray-100",children:"×"})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault();const _=new FormData(a.currentTarget),k={title:_.get("title"),description:_.get("description"),due_date:_.get("due_date"),priority:_.get("priority"),completed:!1};A.mutate(k)},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"reminder_title",className:"text-sm font-semibold text-gray-700",children:"Reminder Title *"}),e.jsx(C,{id:"reminder_title",name:"title",defaultValue:m==null?void 0:m.title,required:!0,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg",placeholder:"Enter reminder title"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"reminder_description",className:"text-sm font-semibold text-gray-700",children:"Description"}),e.jsx(Ge,{id:"reminder_description",name:"description",defaultValue:m==null?void 0:m.description,rows:3,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg",placeholder:"Enter reminder description"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"reminder_due_date",className:"text-sm font-semibold text-gray-700",children:"Due Date *"}),e.jsx(C,{id:"reminder_due_date",name:"due_date",type:"datetime-local",defaultValue:(l=m==null?void 0:m.due_date)==null?void 0:l.slice(0,16),required:!0,className:"mt-2 border-gray-300 focus:border-wendys-red focus:ring-wendys-red/20 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"reminder_priority",className:"text-sm font-semibold text-gray-700",children:"Priority"}),e.jsxs("select",{id:"reminder_priority",name:"priority",defaultValue:(m==null?void 0:m.priority)||"medium",className:"mt-2 block w-full rounded-lg border-gray-300 shadow-sm focus:border-wendys-red focus:ring-wendys-red/20",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>{d(!1),g(null)},className:"border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg",children:"Cancel"}),e.jsx(R,{type:"submit",className:"wendys-button rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:m?"Update Reminder":"Create Reminder"})]})]})]})})]})}const vt=ia,wt=oa,et=b.forwardRef(({className:s,children:n,...r},d)=>e.jsxs(Xt,{ref:d,className:T("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[n,e.jsx(ta,{asChild:!0,children:e.jsx(Qe,{className:"h-4 w-4 opacity-50"})})]}));et.displayName=Xt.displayName;const hs=b.forwardRef(({className:s,...n},r)=>e.jsx(Zt,{ref:r,className:T("flex cursor-default items-center justify-center py-1",s),...n,children:e.jsx(rt,{className:"h-4 w-4"})}));hs.displayName=Zt.displayName;const gs=b.forwardRef(({className:s,...n},r)=>e.jsx(es,{ref:r,className:T("flex cursor-default items-center justify-center py-1",s),...n,children:e.jsx(Qe,{className:"h-4 w-4"})}));gs.displayName=es.displayName;const tt=b.forwardRef(({className:s,children:n,position:r="popper",...d},i)=>e.jsx(sa,{children:e.jsxs(ts,{ref:i,className:T("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...d,children:[e.jsx(hs,{}),e.jsx(aa,{className:T("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(gs,{})]})}));tt.displayName=ts.displayName;const ur=b.forwardRef(({className:s,...n},r)=>e.jsx(ss,{ref:r,className:T("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n}));ur.displayName=ss.displayName;const ae=b.forwardRef(({className:s,children:n,...r},d)=>e.jsxs(as,{ref:d,className:T("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ra,{children:e.jsx(Ut,{className:"h-4 w-4"})})}),e.jsx(na,{children:n})]}));ae.displayName=as.displayName;const xr=b.forwardRef(({className:s,...n},r)=>e.jsx(rs,{ref:r,className:T("-mx-1 my-1 h-px bg-muted",s),...n}));xr.displayName=rs.displayName;const hr=ce("/interviews")({component:gr});function gr(){const[s,n]=b.useState(null),[r,d]=b.useState(null),[i,p]=b.useState([]),[m,g]=b.useState(!1),[y,j]=b.useState(null),[u,o]=b.useState(""),[c,x]=b.useState("ALL"),[v,D]=b.useState(!1),{toast:N}=oe(),h=Ce(),[w,A]=b.useState({candidate_name:"",phone:"",email:"",position:"",interview_date:"",interview_time:"",status:"SCHEDULED",notes:""});b.useEffect(()=>{(async()=>{try{const{data:{user:l}}=await E.auth.getUser();if(!l)return;d(l.id);const{data:a}=await E.from("users").select("store_id").eq("id",l.id).single();a!=null&&a.store_id&&(n(a.store_id),$(a.store_id),W(a.store_id))}catch(l){console.error("Error getting store ID:",l)}})()},[]);const O=async()=>{try{console.log("🔧 Starting database enum migration..."),console.log("Step 1: Updating DONE to COMPLETED...");const{error:t}=await E.from("interviews").update({status:"COMPLETED"}).eq("status","DONE");t?console.log("Update error (may be expected if no DONE values exist):",t.message):console.log("✅ Updated existing DONE values to COMPLETED"),console.log("Step 2: Attempting enum recreation via RPC..."),console.log("⚠️  Manual migration required!"),console.log("Please run this SQL in your Supabase SQL Editor:"),console.log(`
-- Migration SQL to run in Supabase Dashboard:
DROP TYPE IF EXISTS interview_status CASCADE;
CREATE TYPE interview_status AS ENUM ('SCHEDULED','COMPLETED','NO_SHOW','HIRED','REJECTED');

-- Then recreate the interviews table if it was dropped:
-- (Copy the CREATE TABLE statement from schema.sql)
      `),N({title:"Migration Instructions",description:"Check console for SQL commands to run in Supabase Dashboard",variant:"default"})}catch(t){console.error("Migration error:",t),N({title:"Migration Error",description:"See console for details",variant:"destructive"})}},W=async t=>{try{console.log("🔍 Checking database enum values...");const{data:l,error:a}=await E.rpc("get_enum_values",{enum_name:"interview_status"});if(a){console.log("Could not get enum values via RPC, trying direct query...");const _=["SCHEDULED","COMPLETED","NO_SHOW","HIRED","REJECTED"];for(const k of _)try{console.log(`Testing status: "${k}"`);const{error:z}=await E.from("interviews").insert([{store_id:t,candidate_name:`TEST_${k}`,interview_date:new Date().toISOString().split("T")[0],interview_time:"12:00:00",status:k,position:"Test Position"}]).select();z?console.log(`❌ Status "${k}" rejected:`,z.message):(console.log(`✅ Status "${k}" accepted`),await E.from("interviews").delete().eq("candidate_name",`TEST_${k}`))}catch(z){console.log(`❌ Status "${k}" failed:`,z)}}else console.log("✅ Database enum values:",l)}catch(l){console.error("Error checking database enum values:",l)}},$=async t=>{try{D(!0);const{data:l,error:a}=await E.from("interviews").select("*").eq("store_id",t).order("interview_date",{ascending:!0}).order("interview_time",{ascending:!0});if(a)throw a;p(l||[])}catch(l){console.error("Error fetching interviews:",l),N({title:"Error",description:"Failed to fetch interviews",variant:"destructive"})}finally{D(!1)}},q=(t,l)=>{A(a=>({...a,[t]:l}))},te=()=>{A({candidate_name:"",phone:"",email:"",position:"",interview_date:"",interview_time:"",status:"SCHEDULED",notes:""}),j(null)},f=async t=>{if(!r)return null;try{const{data:l,error:a}=await E.from("calendar_events").select("id").eq("created_by",r).ilike("title","Interview: %").ilike("description",`%interviewId: ${t}%`).single();return a&&a.code!=="PGRST116"?(console.error("Error finding calendar event:",a),null):l}catch(l){return console.error("Error in findCalendarEvent:",l),null}},I=async t=>{if(!r){console.warn("No user ID available for calendar event deletion");return}try{const l=await f(t);if(l){const{error:a}=await E.from("calendar_events").delete().eq("id",l.id);if(a)throw console.error("Error deleting calendar event:",a),a;console.log("Calendar event deleted successfully for interview:",t),h.invalidateQueries({queryKey:["calendar-events",r]}),h.refetchQueries({queryKey:["calendar-events",r]})}else console.log("No calendar event found to delete for interview:",t)}catch(l){throw console.error("Error in deleteCalendarEvent:",l),l}},Q=async(t,l=!1)=>{if(!r){console.warn("No user ID available for calendar event creation");return}try{if(t.status!=="SCHEDULED"){console.log("Interview status is not SCHEDULED, removing calendar event if it exists"),await I(t.id);return}if(!t.interview_date||!t.interview_time){console.warn("Invalid date or time for calendar event:",{date:t.interview_date,time:t.interview_time});return}const a=t.interview_time.includes(":")&&t.interview_time.split(":").length===2?`${t.interview_time}:00`:t.interview_time,_=`${t.interview_date}T${a}`,k=new Date(_);if(isNaN(k.getTime()))throw console.error("Invalid start date created:",_,"from:",{date:t.interview_date,time:t.interview_time,formattedTime:a}),new Error("Invalid interview date/time format");const z=new Date(k.getTime()+60*60*1e3);if(isNaN(z.getTime()))throw console.error("Invalid end date calculated from start date:",k),new Error("Invalid end date calculation");const se=z.toISOString(),X={title:`Interview: ${t.candidate_name}`,description:`Interview for ${t.position||"position"}
${t.notes||""}
Phone: ${t.phone||"N/A"}
Email: ${t.email||"N/A"}
interviewId: ${t.id}`,start_date:_,end_date:se,all_day:!1,location:"Store Interview Room",reminder_type:"15min",updated_at:new Date().toISOString()};if(l){const de=await f(t.id);if(de){const{error:K}=await E.from("calendar_events").update(X).eq("id",de.id);K?console.error("Error updating calendar event:",K):(console.log("Calendar event updated successfully for interview:",t.id),h.invalidateQueries({queryKey:["calendar-events",r]}),h.refetchQueries({queryKey:["calendar-events",r]}))}else{const{error:K}=await E.from("calendar_events").insert([{...X,created_by:r}]);K?console.error("Error creating calendar event:",K):(console.log("Calendar event created successfully for interview:",t.id),h.invalidateQueries({queryKey:["calendar-events",r]}),h.refetchQueries({queryKey:["calendar-events",r]}))}}else{const{error:de}=await E.from("calendar_events").insert([{...X,created_by:r}]);de?(console.error("Error creating calendar event:",de),N({title:"Warning",description:"Interview scheduled but calendar event creation failed.",variant:"destructive"})):(console.log("Calendar event created successfully for interview:",t.id),h.invalidateQueries({queryKey:["calendar-events",r]}),h.refetchQueries({queryKey:["calendar-events",r]}))}}catch(a){throw console.error("Error in createOrUpdateCalendarEvent:",a),a}},F=async()=>{if(!r){N({title:"Error",description:"User not authenticated",variant:"destructive"});return}if(!s){N({title:"Error",description:"No store selected",variant:"destructive"});return}if(!w.candidate_name.trim()){N({title:"Error",description:"Candidate name is required",variant:"destructive"});return}if(!w.position.trim()){N({title:"Error",description:"Position is required",variant:"destructive"});return}if(!w.interview_date){N({title:"Error",description:"Interview date is required",variant:"destructive"});return}if(!w.interview_time){N({title:"Error",description:"Interview time is required",variant:"destructive"});return}console.log("Saving interview with data:",w),console.log("Interview date format:",typeof w.interview_date,w.interview_date),console.log("Interview time format:",typeof w.interview_time,w.interview_time);const t=w.interview_time.includes(":")&&w.interview_time.split(":").length===2?`${w.interview_time}:00`:w.interview_time;console.log("Formatted time for database:",t);try{if(y){const{data:l,error:a}=await E.from("interviews").update({candidate_name:w.candidate_name,phone:w.phone||null,email:w.email||null,position:w.position,interview_date:w.interview_date,interview_time:t,status:w.status,notes:w.notes||null}).eq("id",y.id).select().single();if(a)throw a;if(l)try{await Q(l,!0)}catch(_){console.warn("Calendar event update failed, but interview was saved:",_)}N({title:"Success!",description:w.status==="SCHEDULED"?"Interview updated and calendar synced!":"Interview updated and removed from calendar!"})}else{const{data:l,error:a}=await E.from("interviews").insert([{store_id:s,candidate_name:w.candidate_name,phone:w.phone||null,email:w.email||null,position:w.position,interview_date:w.interview_date,interview_time:t,status:w.status,notes:w.notes||null}]).select().single();if(a)throw a;if(l)try{await Q(l,!1)}catch(_){console.warn("Calendar event creation failed, but interview was saved:",_)}N({title:"Success!",description:w.status==="SCHEDULED"?"Interview scheduled and added to calendar!":"Interview saved successfully!"})}$(s),g(!1),te()}catch(l){console.error("Error saving interview:",l),console.error("Full error object:",JSON.stringify(l,null,2)),console.error("Error message:",l.message),console.error("Error details:",l.details),console.error("Error hint:",l.hint),console.error("Error code:",l.code);let a="Failed to save interview";l.message?a=l.message:l.details?a=`Database error: ${l.details}`:l.hint?a=`Hint: ${l.hint}`:l.code&&(a=`Error code: ${l.code}`),N({title:"Error",description:a,variant:"destructive"})}},J=t=>{j(t),A({candidate_name:t.candidate_name,phone:t.phone||"",email:t.email||"",position:t.position||"",interview_date:t.interview_date,interview_time:t.interview_time,status:t.status,notes:t.notes||""}),g(!0)},M=async t=>{if(confirm("Are you sure you want to delete this interview?"))try{try{await I(t)}catch(a){console.warn("Calendar event deletion failed, but continuing with interview deletion:",a)}const{error:l}=await E.from("interviews").delete().eq("id",t);if(l)throw l;N({title:"Deleted!",description:"Interview and calendar event removed successfully."}),$(s)}catch(l){console.error("Error deleting interview:",l),N({title:"Error",description:l.message||"Failed to delete interview",variant:"destructive"})}},fe=i.filter(t=>{const l=t.candidate_name.toLowerCase().includes(u.toLowerCase())||(t.position||"").toLowerCase().includes(u.toLowerCase()),a=c==="ALL"||t.status===c;return l&&a}).reduce((t,l)=>{const a=l.interview_date;return t[a]||(t[a]=[]),t[a].push(l),t},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-wendys-charcoal",children:"Interviews & New Hires"}),e.jsx("p",{className:"text-gray-600",children:"Manage candidate interviews and track the hiring process"})]}),e.jsxs(R,{onClick:()=>g(!0),className:"wendys-button",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Schedule Interview"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(C,{placeholder:"Search by name or position...",value:u,onChange:t=>o(t.target.value),className:"pl-10"})]})}),e.jsxs(vt,{value:c,onValueChange:x,children:[e.jsx(et,{className:"w-full sm:w-48",children:e.jsx(wt,{placeholder:"Filter by status"})}),e.jsxs(tt,{children:[e.jsx(ae,{value:"ALL",children:"All Statuses"}),e.jsx(ae,{value:"SCHEDULED",children:"Scheduled"}),e.jsx(ae,{value:"COMPLETED",children:"Completed"}),e.jsx(ae,{value:"NO_SHOW",children:"No Show"}),e.jsx(ae,{value:"HIRED",children:"Hired"}),e.jsx(ae,{value:"REJECTED",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[v&&e.jsx("div",{className:"text-center text-gray-500",children:"Loading interviews..."}),!v&&Object.keys(fe).length===0&&e.jsx("div",{className:"text-center text-gray-500",children:"No interviews found."}),Object.entries(fe).map(([t,l])=>e.jsxs("div",{className:"wendys-card",children:[e.jsxs("h3",{className:"text-lg font-semibold text-wendys-charcoal mb-4 flex items-center",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),ue(t)]}),e.jsx("div",{className:"space-y-3",children:l.map(a=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-wendys-charcoal",children:a.candidate_name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ns(a.status)}`,children:a.status.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{children:a.position||"No position specified"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:fa(a.interview_time)})]}),a.phone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(la,{className:"h-4 w-4"}),e.jsx("span",{children:a.phone})]}),a.email&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{children:a.email})]})]}),a.notes&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsx(at,{className:"h-4 w-4 inline mr-1"}),a.notes]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>J(a),children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Re,{className:"h-4 w-4"})})]})]})},a.id))})]},t))]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-wendys-charcoal",children:y?"Edit Interview":"Schedule New Interview"}),e.jsx(R,{variant:"ghost",onClick:()=>{g(!1),te()},className:"h-8 w-8 p-0",children:"×"})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),F()},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"candidate_name",children:"Candidate Name *"}),e.jsx(C,{id:"candidate_name",value:w.candidate_name,onChange:t=>q("candidate_name",t.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"position",children:"Position"}),e.jsx(C,{id:"position",value:w.position,onChange:t=>q("position",t.target.value),placeholder:"e.g., Crew Member, Manager"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"phone",children:"Phone"}),e.jsx(C,{id:"phone",type:"tel",value:w.phone,onChange:t=>q("phone",t.target.value),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"email",children:"Email"}),e.jsx(C,{id:"email",type:"email",value:w.email,onChange:t=>q("email",t.target.value),placeholder:"candidate@email.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"interview_date",children:"Interview Date *"}),e.jsx(C,{id:"interview_date",type:"date",value:w.interview_date,onChange:t=>q("interview_date",t.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"interview_time",children:"Interview Time *"}),e.jsx(C,{id:"interview_time",type:"time",value:w.interview_time,onChange:t=>q("interview_time",t.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"status",children:"Status *"}),e.jsxs(vt,{value:w.status,onValueChange:t=>q("status",t),children:[e.jsx(et,{id:"status",children:e.jsx(wt,{})}),e.jsxs(tt,{children:[e.jsx(ae,{value:"SCHEDULED",children:"Scheduled"}),e.jsx(ae,{value:"COMPLETED",children:"Completed"}),e.jsx(ae,{value:"NO_SHOW",children:"No Show"}),e.jsx(ae,{value:"HIRED",children:"Hired"}),e.jsx(ae,{value:"REJECTED",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:"Notes"}),e.jsx(Ge,{id:"notes",value:w.notes,onChange:t=>q("notes",t.target.value),placeholder:"Additional notes about the candidate...",rows:3})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>W(s),className:"text-xs",children:"Test Enum"}),e.jsx(R,{type:"button",variant:"outline",onClick:O,className:"text-xs",children:"Migrate DB"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>{g(!1),te()},children:"Cancel"}),e.jsx(R,{type:"submit",className:"wendys-button",children:y?"Update Interview":"Schedule Interview"})]})]})]})]})})]})}const fr=ge({sales_target:U.number().min(0),labor_target_pct:U.number().min(0),waste_target_pct:U.number().min(0),food_variance_target_pct:U.number().min(0),team_notes:P().optional()});function yr(){const{toast:s}=oe(),n=Ce(),[r,d]=b.useState(null),i=ot("goals","wtd"),p=i.getDateRangeFilter(),m=(p==null?void 0:p.start)||L(new Date,"yyyy-MM-dd"),g=(p==null?void 0:p.end)||L(new Date,"yyyy-MM-dd"),y=i.selectedRange==="mtd"?"month":i.selectedRange==="wtd"?"week":"custom",j=Me({resolver:Oe(fr),defaultValues:{sales_target:0,labor_target_pct:25,waste_target_pct:.5,food_variance_target_pct:.5,team_notes:""}});b.useEffect(()=>{let N=!0;return(async()=>{var W;const{data:h}=await E.auth.getUser(),w=(W=h.user)==null?void 0:W.id;if(!w)return;const{data:A,error:O}=await E.from("users").select("store_id").eq("id",w).maybeSingle();N&&(O||d((A==null?void 0:A.store_id)??null))})(),()=>{N=!1}},[]);const{data:u}=B({queryKey:["goals_settings",r,m,g],queryFn:async()=>{if(!r)return null;try{const{data:N,error:h}=await E.from("goals").select("*").eq("store_id",r).eq("period_start",m).eq("period_end",g).maybeSingle();if(h&&h.code!=="PGRST116"){const w=String(h.code||""),A=String(h.message||"");if(w.startsWith("42")||A.toLowerCase().includes("relation")||A.toLowerCase().includes("does not exist"))return console.warn("[Goals] Goals table not available; returning null"),null;throw h}return N||null}catch(N){const h=String((N==null?void 0:N.code)||""),w=String((N==null?void 0:N.message)||"");if(h.startsWith("42")||w.toLowerCase().includes("relation")||w.toLowerCase().includes("does not exist"))return console.warn("[Goals] Goals table not available; returning null"),null;throw N}},enabled:!!r});b.useEffect(()=>{u&&j.reset({sales_target:u.sales_target,labor_target_pct:u.labor_target_pct,waste_target_pct:u.waste_target_pct,food_variance_target_pct:u.food_variance_target_pct,team_notes:u.team_notes||""})},[u]);const{data:o=[]}=B({queryKey:["omega_daily_for_goals",r,m,g],queryFn:async()=>{if(!r)return[];const{data:N,error:h}=await E.from("omega_daily").select("*").eq("store_id",r).gte("business_date",m).lte("business_date",g).order("business_date",{ascending:!0});if(h)throw h;return N},enabled:!!r}),c=b.useMemo(()=>{const N=o.reduce(($,q)=>$+(Number(q.net_sales)||0),0),h=o.length>0?o.reduce(($,q)=>$+(Number(q.labor_percentage)||0),0)/o.length:0,w=o.reduce(($,q)=>$+(Number(q.waste_amount)||0),0),A=o.reduce(($,q)=>$+(Number(q.food_variance_cost)||0),0),O=N>0?w/N*100:0,W=N>0?A/N*100:0;return{totalSales:N,avgLaborPct:h,wastePct:O,foodVarPct:W}},[o]),x=ee({mutationFn:async N=>{if(!r)throw new Error("No store is linked to your account. See Setup to link one.");const h={store_id:r,scope:y,period_start:m,period_end:g,sales_target:N.sales_target,labor_target_pct:N.labor_target_pct,waste_target_pct:N.waste_target_pct,food_variance_target_pct:N.food_variance_target_pct,team_notes:N.team_notes||null},{error:w}=await E.from("goals").upsert(h,{onConflict:"store_id,period_start,period_end"});if(w){const A=String(w.code||""),O=String(w.message||"");throw A.startsWith("42")||O.toLowerCase().includes("relation")||O.toLowerCase().includes("does not exist")?new Error("Goals table is not installed in this Supabase project. Open Setup and run the SQL to create it, then try again."):w}},onSuccess:()=>{s({title:"Saved",description:"Goals saved for selected period."}),n.invalidateQueries({queryKey:["goals_settings",r,m,g]})},onError:N=>{s({title:"Save failed",description:N.message,variant:"destructive"})}}),v=()=>{j.reset({sales_target:0,labor_target_pct:25,waste_target_pct:.5,food_variance_target_pct:.5,team_notes:""})},D=(N,h)=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-wendys-charcoal",children:"Goal Setting"}),e.jsx("p",{className:"text-gray-600",children:"Set targets and track progress against Omega Daily actuals"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",onClick:v,children:"Reset Goals"}),e.jsx(R,{className:"wendys-button",onClick:j.handleSubmit(N=>x.mutate(N)),disabled:!r||x.isPending,children:"Save Goals"})]})]}),e.jsx(it,{selectedRange:i.selectedRange,selectedDate:i.selectedDate,onRangeChange:i.handleRangeChange,onDateChange:i.handleDateChange,onClearFilters:i.clearFilters}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"wendys-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal mb-3",children:"Sales"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Target"}),e.jsx(C,{type:"number",step:"0.01",...j.register("sales_target")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Actual"}),e.jsxs("p",{className:"text-xl font-semibold",children:["$",(c.totalSales??0).toLocaleString()]})]})]}),e.jsx("div",{children:D((c.totalSales??0)>=(j.watch("sales_target")||0),(c.totalSales??0)>=(j.watch("sales_target")||0)?"On Track":"Behind")})]})]}),e.jsxs("div",{className:"wendys-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal mb-3",children:"Labor"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Target %"}),e.jsx(C,{type:"number",step:"0.1",...j.register("labor_target_pct")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Actual %"}),e.jsxs("p",{className:"text-xl font-semibold",children:[(c.avgLaborPct??0).toFixed(1),"%"]})]})]}),e.jsx("div",{children:D((c.avgLaborPct??0)<=(j.watch("labor_target_pct")||0),(c.avgLaborPct??0)<=(j.watch("labor_target_pct")||0)?"On Track":"High")})]})]}),e.jsxs("div",{className:"wendys-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal mb-3",children:"Waste & Food"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Waste Target %"}),e.jsx(C,{type:"number",step:"0.1",...j.register("waste_target_pct")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Waste Actual %"}),e.jsxs("p",{className:"text-xl font-semibold",children:[(c.wastePct??0).toFixed(2),"%"]})]})]}),e.jsx("div",{children:D((c.wastePct??0)<=(j.watch("waste_target_pct")||0),(c.wastePct??0)<=(j.watch("waste_target_pct")||0)?"On Track":"High")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Food Var Target %"}),e.jsx(C,{type:"number",step:"0.1",...j.register("food_variance_target_pct")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Food Var Actual %"}),e.jsxs("p",{className:"text-xl font-semibold",children:[(c.foodVarPct??0).toFixed(2),"%"]})]})]}),e.jsx("div",{children:D((c.foodVarPct??0)<=(j.watch("food_variance_target_pct")||0),(c.foodVarPct??0)<=(j.watch("food_variance_target_pct")||0)?"On Track":"High")})]})]}),e.jsxs("div",{className:"wendys-card md:col-span-2 xl:col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-wendys-charcoal mb-3",children:"Team & Personal"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"team_notes",children:"Notes"}),e.jsx(C,{id:"team_notes",...j.register("team_notes"),placeholder:"Notes, personal goals, shout-outs..."})]})})]})]})]})}const pr=ce("/goals")({component:yr}),_r=ce("/")({beforeLoad:()=>{throw da({to:"/overview"})}}),br=Qa.update({id:"/smg",path:"/smg",getParentRoute:()=>le}),Nr=Ya.update({id:"/setup",path:"/setup",getParentRoute:()=>le}),vr=sr.update({id:"/overview",path:"/overview",getParentRoute:()=>le}),wr=ir.update({id:"/omega-daily",path:"/omega-daily",getParentRoute:()=>le}),jr=lr.update({id:"/weekending-sheet",path:"/weekending-sheet",getParentRoute:()=>le}),Er=cr.update({id:"/calendar",path:"/calendar",getParentRoute:()=>le}),Sr=hr.update({id:"/interviews",path:"/interviews",getParentRoute:()=>le}),Tr=pr.update({id:"/goals",path:"/goals",getParentRoute:()=>le}),Rr=_r.update({id:"/",path:"/",getParentRoute:()=>le}),Cr={IndexRoute:Rr,CalendarRoute:Er,GoalsRoute:Tr,InterviewsRoute:Sr,OmegaDailyRoute:wr,WeekendingSheetRoute:jr,OverviewRoute:vr,SetupRoute:Nr,SmgRoute:br},kr=le._addFileChildren(Cr)._addFileTypes(),fs=new ca({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}}),Dr=ma({routeTree:kr,context:{queryClient:fs},defaultPreload:"intent"});ua.createRoot(document.getElementById("root")).render(e.jsx(ye.StrictMode,{children:e.jsxs(xa,{client:fs,children:[e.jsx(ha,{router:Dr}),e.jsx(Ea,{}),e.jsx(ga,{initialIsOpen:!1})]})}));
